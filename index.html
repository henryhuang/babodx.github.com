
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>鑫的方向</title>
  <meta name="author" content="babodx">

  
  <meta name="description" content="ubuntu 12.10下初次使用git 前些时候在mac下面使用了git，感觉很棒。今天在单位安装了一台ubuntu 12.10的桌面系统，也开始尝试用git的方式来写blog。 安装 ubuntu下面安装git非常容易。 sudo apt-get install git-core &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://babodx.github.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="鑫的方向" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">鑫的方向</a></h1>
  
    <h2>简单就是不简单！</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:babodx.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/24/git-first-on-ubuntu/">Git-first-on-ubuntu</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-24T08:29:00+08:00" pubdate data-updated="true">Feb 24<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>ubuntu 12.10下初次使用git</h1>

<p>前些时候在mac下面使用了git，感觉很棒。今天在单位安装了一台ubuntu 12.10的桌面系统，也开始尝试用git的方式来写blog。</p>

<h2>安装</h2>

<p>ubuntu下面安装git非常容易。</p>

<pre><code>sudo apt-get install git-core
</code></pre>

<p>然后对git进行全局设置</p>

<pre><code>git config user.name "yourname"
git config user.email "youremail"
</code></pre>

<p>设置后用下面命令可以查看</p>

<pre><code>git config -l
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/20/wo-2013nian-xue-xi-lie-biao/">我2013年学习列表</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-20T13:55:00+08:00" pubdate data-updated="true">Feb 20<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>2013学习计划</h1>

<p>2012年开始了，这一年打算好好学习下ruby、python两种语言和rails框架。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/02/20/wo-2013nian-xue-xi-lie-biao/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/13/kai-shi-shi-yong-octopress/">开始使用octopress</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-13T14:54:00+08:00" pubdate data-updated="true">Feb 13<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>概述</h1>

<p>最近在看<a href="http://ruby-china.org">ruby-china.org</a>和<a href="http://happycasts.net">happycasts.net</a>的视频。开始尝试使用git来做版本控制。原来都是使用svn，所以最近一直在折腾和学习。看到很多编程人员都开始采用octopress来代替wordpress写blog了。我也开始尝试使用这个octopress的blog系统。</p>

<p>octopress是一套基于ruby构建的blog管理系统，通过git来为我们的文章做版本控制，并且通过rake命令可以简单的完成博客的发布与远程站点的同步。配合github提供的pages功能，我们连自己的主机都可以省了。非常方便。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/02/13/kai-shi-shi-yong-octopress/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/24/postfix-extmail-attachment-bug/">Postfix+extmail的附件大小显示和限制问题解决办法</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-24T00:00:00+08:00" pubdate data-updated="true">Jan 24<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近在给一个公司部署了postfix+extmail的邮件系统后，遇到了附件大小限制问题。</p>

<p>extmail默认设置是5M，但是由于extmail的统计大小方法问题，一般附件限制比设置的小了1/3。也就是你设置了5M，也就能到3M多。</p>

<p>这里先说下大小限制的配置。</p>

<p>一、修改extmail的webmail.cf文件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>SYS_MESSAGE_SIZE_LIMIT = 5242880 注意：以位为单位为5M字节。 
</span><span class='line'>
</span><span class='line'>SYS_MESSAGE_SIZE_LIMIT = xxx</span></code></pre></td></tr></table></div></figure>


<p>二、修改/etc/postfix/main.cf文件，</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>message_size_limit = xxx</span></code></pre></td></tr></table></div></figure>


<p>三、重启postfix即可，<code>service postfix restrart</code> 和重启apache，<code>service httpd restart</code></p>

<p><strong>如何解决附件限制大小和系统文件大小相差1/3呢？</strong></p>

<p>首先是修改/var/www/extsuite/extmail/libs/Ext/App目录下的Compose.pm文件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sub is_oversize {   
</span><span class='line'>    my $self = shift;   
</span><span class='line'>    my $sys = $self-&gt;{sysconfig};   
</span><span class='line'>    my $maxsize = $sys-&gt;{SYS_MESSAGE_SIZE_LIMIT};   
</span><span class='line'>    my $tsize = shift;   
</span><span class='line'>  
</span><span class='line'>    return 0 unless defined $maxsize and $maxsize &gt; 0;   
</span><span class='line'>    return 0 unless defined $tsize and $tsize &gt; 0;   
</span><span class='line'>  
</span><span class='line'>    if ($tsize &gt;= $maxsize) {   
</span><span class='line'>        return $maxsize;   
</span><span class='line'>    }   
</span><span class='line'>    0;   
</span><span class='line'>}   </span></code></pre></td></tr></table></div></figure>


<p>注意到上面的if ($tsize >= $maxsize)了吧，修改为if ($tsize >= 1.29*$maxsize)</p>

<p>这样修改后，基本extmail的附件限制大小就和系统显示的文件大小一样。</p>

<p>目前还有一个文件，就是我们上传一个1M的内容，显示出来的附件大小大约是1.3M，这个问题需要修改一个human函数解决。</p>

<p>在/var/www/extsuite/extmail/libs/Ext目录下，打开Utils.pm文件</p>

<p>找到如下函数</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sub human_size {   
</span><span class='line'>    my $s = $_[0];   
</span><span class='line'>    if($s&lt;1024) {   
</span><span class='line'>        return sprintf("%0.2f", $s/1024)."K";   
</span><span class='line'>    }elsif($s&lt;1024*1024) {   
</span><span class='line'>        return sprintf("%0.1f", $s/1024)."K";   
</span><span class='line'>    }else {   
</span><span class='line'>        return sprintf("%0.1f", $s/(1024*1024))."M";   
</span><span class='line'>    }   
</span><span class='line'>}   </span></code></pre></td></tr></table></div></figure>


<p>将函数修改如下</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sub human_size {   
</span><span class='line'>    my $s = $_[0];   
</span><span class='line'>    if($s&lt;1024) {   
</span><span class='line'>        return sprintf("%0.2f", $s/1024/1.36)."K";   
</span><span class='line'>    }elsif($s&lt;1024*1024) {   
</span><span class='line'>        return sprintf("%0.1f", $s/1024/1.36)."K";   
</span><span class='line'>    }else {   
</span><span class='line'>        return sprintf("%0.1f", $s/(1024*1024*1.36))."M";   
</span><span class='line'>    }   
</span><span class='line'>}   </span></code></pre></td></tr></table></div></figure>


<p>这样就解决了extmail的附件大小显示和限制问题。</p>

<p>目前还有一个遗留问题，就是在folder.htm模板界面里显示的邮件大小还是比系统文件大1/3。这个不知道怎么修改了。找到了对应函数，但是它直接显示的多少M或者多少K，用除1.36会出现问题。。。。这个期待高手解决了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/19/extman/">Extman后台登陆问题解决方法</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-19T00:00:00+08:00" pubdate data-updated="true">Jan 19<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>前一阵子给一个公司架设了postfix+mysql+extmail的邮件系统。</p>

<p>用了一段时间后，发现后台管理的extman不能登录了，提示如下</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Can't open /tmp/extman//sid_26da75f9aec35f2cbc6b4fa425ab525e, No such file or directory</span></code></pre></td></tr></table></div></figure>


<p>后来发现是/tmp目录下的extman目录被系统清除了。。</p>

<p>然后再网络上找了一些解决办法，说是Linux系统在启动的时候，会清理/tmp目录。建议将这个目录设置在/var/tmp目录下。</p>

<p>结果用了一段时间后，发现一样是被清理。。。。</p>

<p>我的系统是CentOS 5.3 64bit</p>

<p>最后我通过修改，/var/www/extsuite/extman/webmail.cf文件里面的配置</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#sys_sess_dir, the session dir
</span><span class='line'>SYS_SESS_DIR = /tmp/extman/</span></code></pre></td></tr></table></div></figure>


<p>将SYS_SESS_DIR指定到了/data/extman下面了。估计这次系统不会清除这个目录了吧</p>

<p>还有一种常见错误就是提示</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Can't open /tmp/extman//sid_89b33ec5ce0b5903f24035aa4ad76d15, Permission denied</span></code></pre></td></tr></table></div></figure>


<p>这个是因为extman 那个临时目录的权限不对。</p>

<p>可以设置为777就ok了</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/12/open-telnet-win7/">Win7下启动telnet&#8211;转载</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-12T00:00:00+08:00" pubdate data-updated="true">Jan 12<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>因为我日常需要用到telnet来管理交换机，所以经常用到telnet。</p>

<p>升级到win7后，发现telnet不能用了，提示如下</p>

<p><img src="http://farm9.staticflickr.com/8382/8512218888_459238840f.jpg" alt="telnet报错截图" />
后来查找资料发现</p>

<p>Windows 7出于安全性考虑屏蔽了Telnet。</p>

<p>如何开启呢？</p>

<p>在开始菜单-》控制面板-》程序界面中，点“打开或关闭Windows功能”如下图</p>

<p><img src="http://farm9.staticflickr.com/8378/8512221634_b60d3f0c62.jpg" alt="添加功能" /></p>

<p>然后在弹出的&#8221;Windows功能&#8221;界面中，选择上Telnet客户端，点击确定按钮。如下图</p>

<p><img src="http://farm9.staticflickr.com/8526/8512222420_fd27aa15fe.jpg" alt="打开telnet客户端" /></p>

<p>通过上面这些设置，就打开了Windows默认屏蔽的Telnet功能了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/07/quickmacro-on-win7/">Windows 7平台下按键精灵的后台运行</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-07T00:00:00+08:00" pubdate data-updated="true">Jan 7<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>上次写了一篇野D带黑上，后台挂机按键精灵代码</a>，有人反映win7下按键精灵后台代码不能运行。</p>

<p>这里单独说明下。首先的我win7系统是32为的windows7 旗舰版，按键精灵版本是7.20.5292 免费版。在刚一开按键精灵的时候，会提示Init Seg Error。</p>

<p>这个不用管，直接点确定就可以。然后打开按键精灵后，我们点“设置”按钮</p>

<p><img src="http://farm9.staticflickr.com/8510/8512206738_6e55d4f97b.jpg" alt="设置按钮" /></p>

<p>然后在弹出来的设置界面中，将热键模式选择为增强模式，如下图所示。</p>

<p><img src="http://farm9.staticflickr.com/8515/8511095399_75fe398ca4.jpg" alt="增强模式截图" /></p>

<p>点确定后，返回按键精灵主界面。</p>

<p><strong>创建带黑上脚本</strong>点击新建按钮，进入“按键精灵-我的脚本”界面。然后点击这个界面中的“源文件”标签，如下图所示（注意红色三角标记）</p>

<p><img src="http://farm9.staticflickr.com/8097/8512207532_e622ca5a45_z.jpg" alt="导入截图" /></p>

<p>然后将带黑上脚本的代码粘贴进来。并在右侧“描述”里，写上黑上后台。点击保存退出，如下图所示</p>

<p><img src="http://farm9.staticflickr.com/8095/8511096257_a2cfe36526_z.jpg" alt="保存截图" /></p>

<p>到这里按键精灵设置完毕。只要打开刷黑上的小德号窗口，按F10启动脚本就可以了。然后再切换窗口双开，上网都可以。这个脚本会一直往小德号的窗口发送指令的。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/03/druid-ubrs-quickmacro-code/">野D带黑上，后台挂机按键精灵代码</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-03T00:00:00+08:00" pubdate data-updated="true">Jan 3<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>代码是运行在按键精灵里的。在winxp+按键精灵7和win7+按键精灵7下测试通过</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Plugin hwnd=Window.GetKeyFocusWnd()
</span><span class='line'>Rem start
</span><span class='line'>For 30
</span><span class='line'>Plugin Bkgnd.KeyPress(hwnd,70)
</span><span class='line'>Delay 300
</span><span class='line'>EndFor
</span><span class='line'>Delay 1000
</span><span class='line'>Plugin Bkgnd.KeyDown(hwnd,16)
</span><span class='line'>Plugin Bkgnd.KeyPress(hwnd,87)
</span><span class='line'>Plugin Bkgnd.KeyUp(hwnd,16)
</span><span class='line'>Delay 500
</span><span class='line'>For 30
</span><span class='line'>Plugin Bkgnd.KeyPress(hwnd,70)
</span><span class='line'>Delay 300
</span><span class='line'>EndFor
</span><span class='line'>Delay 1000
</span><span class='line'>Plugin Bkgnd.KeyDown(hwnd,18)
</span><span class='line'>Plugin Bkgnd.KeyPress(hwnd,68)
</span><span class='line'>Plugin Bkgnd.KeyUp(hwnd,18)
</span><span class='line'>Delay 500
</span><span class='line'>For 30
</span><span class='line'>Plugin Bkgnd.KeyPress(hwnd,70)
</span><span class='line'>Delay 300
</span><span class='line'>EndFor
</span><span class='line'>Delay 1000
</span><span class='line'>For 8
</span><span class='line'>Plugin Bkgnd.KeyDown(hwnd,16)
</span><span class='line'>Plugin Bkgnd.KeyPress(hwnd,82)
</span><span class='line'>Plugin Bkgnd.KeyUp(hwnd,16)
</span><span class='line'>EndFor
</span><span class='line'>Delay 500
</span><span class='line'>Goto start
</span></code></pre></td></tr></table></div></figure>


<p>代码说明：</p>

<p>上面是我自己使用的代码，我的快捷键设置和大家不一样，所以别人使用，请注意修改快捷键。</p>

<p>精灵之火（野性） Shift+R</p>

<p>树皮 Shift+W</p>

<p>狂暴回复 Alt+D</p>

<p>横扫+重殴 宏 F （其实就是个AOE宏，需要不断切换目标，保证重殴可以放出来就可以）</p>

<p>以上就是我带刷的代码，基本保证装备不红，人物不死。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/03/2010-snow-first/">2010年北京第一场雪</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-03T00:00:00+08:00" pubdate data-updated="true">Jan 3<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>2010年1月2日凌晨，北京开始飘落第一场雪。雪花很小。。。只有薄薄一层。。。。到了2日晚上雪花开始变大。。。
现在3日早上。。。大大的雪花，厚厚一层雪。。。
下午打算带老婆孩子玩学去了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/01/druapl-url-nginx-rewrite/">Drupal在nginx 0.8.15下的简洁URL配置</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-01T00:00:00+08:00" pubdate data-updated="true">Jan 1<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近在学习drupal，发现这个程序比xoops、joomla都灵活，对应的学习曲线也高。反正安装后，根本不知道真没设置。呵呵</p>

<p>下面先在nginx上配置了rewrite规则，让drupal支持简洁的URL</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>server
</span><span class='line'>{
</span><span class='line'>listen 80;
</span><span class='line'>server_name drupal.xinlogs.com;
</span><span class='line'>index index.html index.htm index.php;
</span><span class='line'>root /data0/htdocs/drupal;
</span><span class='line'> 
</span><span class='line'>#limit_conn crawler 20;
</span><span class='line'>location = / {
</span><span class='line'>index index.php;
</span><span class='line'>}
</span><span class='line'> 
</span><span class='line'>location / {
</span><span class='line'>index index.php index.html;
</span><span class='line'> 
</span><span class='line'>if (!-f $request_filename) {
</span><span class='line'>rewrite ^(.*)$ /index.php?q=$1 last;
</span><span class='line'>break;
</span><span class='line'>}
</span><span class='line'> 
</span><span class='line'>if (!-d $request_filename) {
</span><span class='line'>rewrite ^(.*)$ /index.php?q=$1 last;
</span><span class='line'>break;
</span><span class='line'>}
</span><span class='line'>}
</span><span class='line'> 
</span><span class='line'>location ~ .*.(php|php5)?$
</span><span class='line'>{
</span><span class='line'>fastcgi_pass unix:/tmp/php-cgi.sock;
</span><span class='line'>#fastcgi_pass 127.0.0.1:9000;
</span><span class='line'>fastcgi_index index.php;
</span><span class='line'>include fcgi.conf;
</span><span class='line'>}
</span><span class='line'> 
</span><span class='line'>location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$
</span><span class='line'>{
</span><span class='line'>expires 30d;
</span><span class='line'>}
</span><span class='line'> 
</span><span class='line'>location ~ .*.(js|css)?$
</span><span class='line'>{
</span><span class='line'>expires 1h;
</span><span class='line'>}
</span><span class='line'> 
</span><span class='line'>log_format drupal_access '$remote_addr - $remote_user [$time_local] "$request" '
</span><span class='line'>'$status $body_bytes_sent "$http_referer" '
</span><span class='line'>'"$http_user_agent" $http_x_forwarded_for';
</span><span class='line'>access_log /data1/logs/drupal_access.log drupal_access;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
<h1>Categories</h1>
<ul id="categories">
  <li class='category'><a href='/blog/categories/database/'>Database (3)</a></li>
<li class='category'><a href='/blog/categories/game/'>Game (14)</a></li>
<li class='category'><a href='/blog/categories/host/'>Host (2)</a></li>
<li class='category'><a href='/blog/categories/java/'>Java (3)</a></li>
<li class='category'><a href='/blog/categories/life/'>Life (1)</a></li>
<li class='category'><a href='/blog/categories/linux/'>Linux (26)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>Octopress (1)</a></li>
<li class='category'><a href='/blog/categories/php/'>PHP (1)</a></li>
<li class='category'><a href='/blog/categories/plan/'>Plan (1)</a></li>
<li class='category'><a href='/blog/categories/rails/'>Rails (5)</a></li>
<li class='category'><a href='/blog/categories/ruby/'>Ruby (1)</a></li>
<li class='category'><a href='/blog/categories/software/'>Software (5)</a></li>
<li class='category'><a href='/blog/categories/virtualization/'>Virtualization (8)</a></li>
<li class='category'><a href='/blog/categories/website/'>Website (1)</a></li>
<li class='category'><a href='/blog/categories/windows/'>Windows (5)</a></li>
<li class='category'><a href='/blog/categories/git/'>git (1)</a></li>

</ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/02/24/git-first-on-ubuntu/">git-first-on-ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/20/wo-2013nian-xue-xi-lie-biao/">我2013年学习列表</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/13/kai-shi-shi-yong-octopress/">开始使用octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/01/24/postfix-extmail-attachment-bug/">postfix+extmail的附件大小显示和限制问题解决办法</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/01/19/extman/">extman后台登陆问题解决方法</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - babodx -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
