
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>鑫的方向</title>
  <meta name="author" content="babodx">

  
  <meta name="description" content="最近由于项目需要，要求安装oracle10g数据库进行开发。在安装的时候碰到一些问题，这里记录下解决办法。 我的系统是win7 中文32位旗舰版。 数据库是oracle10g 问题1 在安装的时候，首先是系统检查。因为默认oracle是不支持win7系统的，所以我们需要修改下文件，让它支持。 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://babodx.github.com/blog/page/7/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="鑫的方向" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">鑫的方向</a></h1>
  
    <h2>简单就是不简单！</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:babodx.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/12/win7-install-oracle/">Win7安装oracle10g完美解决方案</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-12T00:00:00+08:00" pubdate data-updated="true">Jul 12<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近由于项目需要，要求安装oracle10g数据库进行开发。在安装的时候碰到一些问题，这里记录下解决办法。</p>

<p>我的系统是win7 中文32位旗舰版。</p>

<p>数据库是oracle10g</p>

<p><strong>问题1</strong></p>

<p>在安装的时候，首先是系统检查。因为默认oracle是不支持win7系统的，所以我们需要修改下文件，让它支持。</p>

<p>具体办法：</p>

<p>找到database\stage\prereq\db\refhost.xml文件，在文件里添加如下内容</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;!--Microsoft Windows 7--&gt;    
</span><span class='line'>&lt;OPERATING_SYSTEM&gt;    
</span><span class='line'>&lt;VERSION VALUE="6.1"/&gt;    
</span><span class='line'>&lt;/OPERATING_SYSTEM&gt;   </span></code></pre></td></tr></table></div></figure>


<p><strong>问题2</strong>
上面只是检查系统是否符合要求，这个时候如果运行setup.exe还有可能出现错误提示。这个时候只要我们右键点setup.exe文件，然后选择“兼容性”标签，勾选上“以兼容模式运行这个程序”并在列表里选择“windows xp(service pack 3)”。然后记得安装的时候选择基本安装模式，不要用高级模式。高级模式到后面还是不能通过。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/12/htc-use-android-2-1/">Hero 使用Android 2.1 ROM 心得。</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-12T00:00:00+08:00" pubdate data-updated="true">Jul 12<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>上次介绍了下使用Android 2.1的体会，当时因为导航等问题，最终放弃了2.1系统，继续刷回1.5系统用了。
经过这段时间，android 2.1系统不断完善，导航问题也有了突破。感谢各位高手贡献自己的力量。
这次我刷的还是F大制作的Rom：<a title="Permanent Link to Daguu Sense v1.0(Official RUU,BFS,Compcache,SSH..)" rel="bookmark" href="http://ligux.com/?p=920">Daguu Sense v1.0(Official RUU,BFS,Compcache,SSH..)</a>
RADIO采用最新的：63.18.55.06PU_6.35.15.14
这个Rom确实达到了高效、干净、稳定的目的。
<strong>导航</strong>
以前我一直没有采用android 2.1的很大原因就是导航问题。android 2.1原来只能使用高德等导航，效果很不好。KLD需要替换libgps.so使用，而且稳定性不好。我最爱用的天行者根本用不了。
现在论坛上的牛人终于找到了KLD需要替换libgps.so的具体原因，并且放出了修改版本，可以不用替换libgps.so文件完美运行了。
我测试结果是直接安装后，搜星定位都很快。路测鸟巢到五棵松全程12Km，也很稳定，一切正常。
<strong>蓝牙</strong>
蓝牙在1.5只能用耳机，不能传文件。现在android 2.1下我测试用诺基亚E63给hero传文件，一切正常。
<strong>Openvpn</strong>
这个Rom安装后，自带openvpn setting软件，设置好后，连接openvpn一切正常。
<strong>耗电</strong>
反正hero基本是1-2天一充电，android 2.1确实比1.5耗电，但基本还是1-2天一充，没有什么变化。
<strong>小结</strong>
随着性能、稳定性提升，导航问题解决。目前我已经采用android 2.1系统了，而不是像以前一样刷来玩玩，然后还要刷回1.5日常用。感觉目前hero下的android2.1基本已经满足大多数用户正常使用了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/22/htc-hero-android-2-1/">HTC Hero 2.1 体验</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-22T00:00:00+08:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近随着官方放出的hero g3 android 2.1 ROM，开很有很多技术高人也发布了自己的修改、优化版本。
我也忍不住开始刷新手机了。
我选择的是<span id="thread_137874"><a href="android-137874-1-1.html">Daguu Espresso v1.2 By FlZyGaMeUp Release </a></span>，原因很简单，我之前用的ROM就是F大发布的<span id="thread_56409"><a href="android-56409-1-1.html" style="font-weight: bold">FLZYUP Custom ROM v1.6 (Hero Android 1.5固件最终版)</a>。所以这次依然选择了他制作的ROM</span>
<strong><span>刷新要求</span></strong>
<span>Recovery版本：recovery-RA-hero-v1.6.2<br>
Radio版本：63.18.55.06OU_6.35.15.01</span>
<span>以上这些都可以到机锋网找到。</span>
<span>刷新后，界面确实很漂亮。使用起来也感觉比1.5的ROM多出很多功能。不过速度确实不如以前1.5的ROM了。</span>
<span>我是晚上刷的，用到第2天中午，觉得还是不如1.5的ROM，又刷回<span id="thread_56409"><a href="http://www.xinlogs.com/editor/fckeditor/editor/android-56409-1-1.html" style="font-weight: bold">FLZYUP Custom ROM v1.6 (Hero Android 1.5固件最终版)</a>这个版本了。</span></span>
<strong><span><span>主要问题</span></span></strong>
<span><span>如果就android 2.1的ROM本身来说，已经接近完美了。速度和耗电还不太好，不过有一种说法是只要不是官方的内核，耗电就会高。</span></span>
<span><span>而F大这次就是没有采用官方内核，而是自己编译的。</span></span>
<span><span>不过我认为最大的问题是导航软件的兼容性，因为我经常用手机导航。以前1.5的时候，先后使用过KLD、领航者、高德和天行者。</span></span>
<span><span>KLD的地图和导航都不错，但是明显不是为android开发的，按键很不好用，有时候点半天都没有反应。后来的2010年4月的一个新版本，有所改进。</span></span>
<span><span>领航者和高德的路线规划和地图都不满意。</span></span>
<span><span>最后我一直在使用天行者9，这个软件很满意。地图基本和<a href="http://www.51ditu.com">www.51ditu.com</a>网站的一样。外出只要在51ditu.com可以找到地方，就不用担心手机导航不到。反正感觉北京使用，天行者9最好了。</span></span>
<span><span>而上面这些在android 1.5ROM正常的导航软件，到了android 2.1很少可以正常工作。</span></span>
<span><span>天行者9是根本不能运行在2.1的ROM</span></span>
<span><span>KLD需要修改libgps.so文件，然后还有可能信号不稳定，经常断。</span></span>
<span><span>领航者和高德倒是可以使用，问题这两个软件实现效果和地图都很差。</span></span>
<span><span>还有个城际通，可以安装，但是出现第一屏提示后，就自动退出了。</span></span>
<span><span>由于以上原因，我还是刷回了android 1.5 ROM，期待更完美的版本了和更好的导航软件出现了。</span></span></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/02/Appendicitis/">很久没有写博客了，前几天得阑尾炎了。</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-02T00:00:00+08:00" pubdate data-updated="true">Jun 2<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>2010年5月27日。。。上午在单位突然得阑尾炎了。。。郁闷呀。
被同事直接给送医院了，老婆也及时赶过来了。
现在好多了，上来记录下。等好了以后，找时间切除阑尾吧。。。。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/21/Mourning-CSS-SETUP/">哀悼日网站和bo-blog变灰色设置</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-21T00:00:00+08:00" pubdate data-updated="true">Apr 21<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>根据国务院文件，5.19-5.21为全国哀悼日，在此期间，全国和各驻外机构下半旗志哀，停止公共娱乐活动，外交部和我国驻外使领馆设立吊唁簿。5月19日14时28分起，全国人民默哀3分钟，届时汽车、火车、舰船鸣笛，防空警报鸣响。 Admin5与很多草根网站都将整站换成素装。并建议中国所有站点更换为素装。</p>

<p>为方便站点哀悼，特提供css滤镜代码，以表哀悼。以下为全站CSS代码。</p>

<p><code>html { filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1); } </code></p>

<p>使用方法：这段代码可以变网页为黑白，将代码加到CSS最顶端就可以实现素装。建议全国站长动起来。为在地震中遇难的同胞哀悼。</p>

<p>如果网站没有使用CSS，可以在网页/模板的HTML代码<head>和</head> 之间插入：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>
</span><span class='line'>    &lt;style&gt;  
</span><span class='line'>    html{filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);}   
</span><span class='line'>    style&gt;  
</span></code></pre></td></tr></table></div></figure>


<p>有一些站长的网站可能使用这个css 不能生效，是因为网站没有使用最新的网页标准协议</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> &lt;html xmlns=“http://www.w3.org/1999/xhtml”&gt;   </span></code></pre></td></tr></table></div></figure>


<p>请将网页最头部的<html>替换为以上代码。</p>

<p>有一些网站FLASH动画的颜色不能被CSS滤镜控制，可以在FLASH代码的<object …>和</object>之间插入：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>“false” name=“menu”/&gt;   
</span><span class='line'>“opaque” name=“wmode”/&gt;  </span></code></pre></td></tr></table></div></figure>


<p>最简单的把页面变成灰色的代码是在head 之间加
 </p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>
</span><span class='line'>    &lt;style type=“text/css”&gt;  
</span><span class='line'>      
</span><span class='line'>    html {   
</span><span class='line'>        FILTER: gray   
</span><span class='line'>    }   
</span><span class='line'>    style&gt;  
</span></code></pre></td></tr></table></div></figure>


<p>下面再看看如何给上面这些应用到bo-blog的页面中呢。</p>

<p>首先我们到bo-blog的根目录找到我们的template模板目录，在其中找到我们使用的模板所采用的CSS文件。在文件最后加入</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>html { filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1); }    </span></code></pre></td></tr></table></div></figure>


<p>另在哀悼日或遇难的新闻，所有专题和主题 图片上不能使用红色标题。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/05/vps-dropbox-install/">一款Linux下同步备份文件的好软件DROPBOX</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-05T00:00:00+08:00" pubdate data-updated="true">Apr 5<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>原来一直用tar、sync等软件实现备份。需要些脚本还要找一台其他服务器进行同步。现在有了DROPBOX这个网站提供的服务，一切都变容易了。</p>

<p><strong>DROPBOX网站：</strong>
<a href="www.dropbox.com">http://www.dropbox.com/</a>
<strong>DROP功能：</strong>
偷懒直接把官方介绍帖过来了。主要就是免费提供2G的同步空间，可以自动同步文件并保留文件的历史版本</p>

<h1>Dropbox Features</h1>


<h2 id="sync">File Sync</h2>


<p>Dropbox allows you to sync your files online and across your computers automatically.</p>

<ul class="blue-bullets">
<li>2GB of online storage for free, with up to 100GB available to paying customers.</li>
    <li>Sync files of any size or type.</li>
    <li>Sync Windows, Mac and Linux computers.</li>
    <li>Automatically syncs when new files or changes are detected.</li>
    <li>Work on files in your Dropbox even if you&#8217;re offline. Your changes sync once your computer has an Internet connection again.</li>
    <li>Dropbox transfers will correctly resume where they left off if the connection drops.</li>
    <li>Efficient sync - only the pieces of a file that changed (not the whole file) are synced. This saves you time.</li>
    <li>Doesn&#8217;t hog your Internet connection. You can manually set bandwidth limits. </li>
</ul>


<h2 id="sharing">File Sharing</h2>


<p>Sharing files is simple and can be done with only a few clicks.</p>

<ul class="blue-bullets">
<li>Shared folders allow several people to collaborate on a set of files.</li>
    <li>You can see other people&#8217;s changes instantly.</li>
    <li>A &#8220;Public&#8221; folder that lets you link directly to files in your Dropbox.</li>
    <li>Control who is able to access shared folders (including ability to kick people out and remove the shared files from their computers).</li>
    <li>Automatically create shareable online photo galleries from folders of photos in your Dropbox.</li>
</ul>


<h2 id="backup">Online Backup</h2>


<p>Dropbox backs up your files online without you having to think about it.</p>

<ul class="blue-bullets">
<li>Automatic backup of your files.</li>
    <li>Undelete files and folders.</li>
    <li>Restore previous versions of your files.</li>
    <li>30 days of undo history, with unlimited undo available as a paid option.</li>
</ul>


<h2 id="web">Web Access</h2>


<p>A copy of your files are stored on Dropbox&#8217;s secure servers. This lets you access them from any computer or mobile device.</p>

<ul class="blue-bullets">
<li>Manipulate files as you would on your desktop - add, edit, delete, rename etc.</li>
    <li>Search your entire Dropbox for files.</li>
    <li>A &#8220;Recent Events&#8221; feed that shows you a summary of activity in your Dropbox.</li>
    <li>Create shared folders and invite people to them.</li>
    <li>Recover previous versions of any file or undelete deleted files.</li>
    <li>View photo galleries created automatically from photos in your Dropbox.</li>
</ul>


<h2 id="security">Security & Privacy</h2>


<p>Dropbox takes the security and privacy of your files very seriously.</p>

<ul class="blue-bullets">
<li>Shared folders are viewable only by people you invite.</li>
    <li>All transmission of file data and metadata occurs over an encrypted channel (SSL).</li>
    <li>All files stored on Dropbox servers are encrypted (AES-256) and are inaccessible without your account password.</li>
    <li>Dropbox website and client software have been hardened against attacks from hackers.</li>
    <li>Dropbox employees are not able to view any user&#8217;s files.</li>
    <li>Online access to your files requires your username and password.</li>
    <li>Public files are only viewable by people who have a link to the file(s). Public folders are not browsable or searchable.</li>
</ul>


<h2 id="mobile">Mobile Device Access</h2>


<p>The free <a href="http://www.xinlogs.com/iphoneapp">Dropbox iPhone app</a> lets you:</p>

<ul class="blue-bullets">
<li>Access your Dropbox on the go.</li>
    <li>View your files on your iPhone or iPod Touch.</li>
    <li>Download files for offline viewing.</li>
    <li>Take photos and videos and sync them to your Dropbox.</li>
    <li>Share links to files in your Dropbox.</li>
    <li>View interactive photo galleries.</li>
    <li>Sync downloaded files so they&#8217;re up-to-date.</li>
</ul>


<p> </p>

<p>A mobile-optimized version of the website is available for owners of Blackberry phones and other Internet-capable mobile devices.
 
<strong>Linux下安装</strong></p>

<p>如果你的Linux服务器安装了Xserver和桌面，完全可以安装官方的指南来安装。但是因为一般的VPS都内存小得可怜，不会奢侈到安装桌面，所以下面主要介绍在没有安装桌面系统的命令行Linux下安装步骤。
关于安装方法的内容转帖自<a href="http://lazyhack.net/install-dropbox-in-vps/">http://lazyhack.net/install-dropbox-in-vps/</a>
<strong>1、登陆进VPS或者是服务器，进入用户目录</strong></p>

<div class="codeText">
<div id="code_6795">
<ol class="dp-xml" style="border-bottom:0px;border-left:0px;list-style-type:none;margin-left:5px;border-top:0px;border-right:0px;">
<li class="alt">
<span><span>cd </span></span>     <link rel="stylesheet" type="text/css" href="http://www.xinlogs.com/editor/fckeditor/editor/plugins/insertcode/insertcode.css">
<script language="javascript" src="http://www.xinlogs.com/editor/fckeditor/editor/plugins/insertcode/excute.js" type="text/javascript"></script>
</li>
</ol>
</div>
</div>


<p><strong>2、下载dropbox的客户端，要For linux那个而非For Nautilus的</strong>
这里我是在<a href="http://lazyhack.net/install-dropbox-in-vps/">http://lazyhack.net/install-dropbox-in-vps/</a>文档中找到的地址，官方网站找了半天都是Nautilus的版本
32位下载地址 <a href="http://www.dropbox.com/download?plat=lnx.x86">http://www.dropbox.com/download?plat=lnx.x86</a>
64位下载地址 <a href="http://www.dropbox.com/download?plat=lnx.x86_64">http://www.dropbox.com/download?plat=lnx.x86_64</a>
我这里用的32位系统，所以下载32位客户端</p>

<div class="codeText">
<div id="code_2958">
<ol class="dp-xml" style="border-bottom:0px;border-left:0px;list-style-type:none;margin-left:5px;border-top:0px;border-right:0px;">
<li class="alt">
<span><span>wget http://www.dropbox.com/download?</span><span class="attribute">plat</span><span>=</span><span class="attribute-value">lnx</span><span>.x86 </span></span>     <link rel="stylesheet" type="text/css" href="http://www.xinlogs.com/editor/fckeditor/editor/plugins/insertcode/insertcode.css">
<script language="javascript" src="http://www.xinlogs.com/editor/fckeditor/editor/plugins/insertcode/excute.js" type="text/javascript"></script>
</li>
</ol>
</div>
</div>


<p><strong>3、解压</strong></p>

<div class="codeText">
<div id="code_2090">
<ol class="dp-xml" style="border-bottom:0px;border-left:0px;list-style-type:none;margin-left:5px;border-top:0px;border-right:0px;">
<li class="alt"><span><span>tar zxvf dropbox-lnx.x86-0.7.110.tar.gz </span></span></li>
</ol>
</div>
<link rel="stylesheet" type="text/css" href="http://www.xinlogs.com/editor/fckeditor/editor/plugins/insertcode/insertcode.css">
<script language="javascript" src="http://www.xinlogs.com/editor/fckeditor/editor/plugins/insertcode/excute.js" type="text/javascript"></script>
</div>


<p><strong>4、下载dbmakefilelib.py并运行</strong></p>

<div class="codeText">
<div id="code_3236">
<ol class="dp-xml" style="border-bottom:0px;border-left:0px;list-style-type:none;margin-left:5px;border-top:0px;border-right:0px;">
<li class="alt"><span><span>wget http://dl.dropbox.com/u/637552/Dropbox/dbmakefilelib.py </span></span></li>
    <li><span>python dbmakefilelib.py </span></li>
</ol>
</div>
<link rel="stylesheet" type="text/css" href="http://www.xinlogs.com/editor/fckeditor/editor/plugins/insertcode/insertcode.css">
<script language="javascript" src="http://www.xinlogs.com/editor/fckeditor/editor/plugins/insertcode/excute.js" type="text/javascript"></script>
</div>


<p>如果出现以下信息，说明它运行正常
dropboxd ran for 15 seconds without quitting - success?
看到它的提示了吗，<a target="_blank" href="http://www.vpser.net/go/dropbox">Dropbox</a>已经启动了，让你运行15秒后再退出，这个过程就是dropbox生成机器信息并保存到db文件的，其实对于国外的<a title="查看 vps 的全部文章" target="_blank" href="http://lazyhack.net/tag/vps/">vps</a>来说几秒时间就够了，我们ctrl－c将其退出，完成接下来的步骤<br>
 
<strong>5、进入</strong><a target="_blank" href="http://www.vpser.net/go/dropbox"><strong>Dropbox</strong></a><strong>的dot目录导出机器信息</strong></p>

<div class="codeText">
<div id="code_7591">
<ol class="dp-xml" style="border-bottom:0px;border-left:0px;list-style-type:none;margin-left:5px;border-top:0px;border-right:0px;">
<li class="alt"><span><span>cd .~/.dropbox </span></span></li>
    <li><span>$ sqlite3 dropbox.db </span></li>
    <li class="alt"> </li>
    <li><span>SQLite version 3.6.22 </span></li>
    <li class="alt"><span>Enter &#8220;.help&#8221; for instructions </span></li>
    <li><span>Enter SQL statements terminated with a &#8220;;&#8221; </span></li>
    <li class="alt">
<span>sqlite</span><span class="tag">></span><span> .dump config </span>
</li>
</ol>
</div>
<link rel="stylesheet" type="text/css" href="http://www.xinlogs.com/editor/fckeditor/editor/plugins/insertcode/insertcode.css">
<script language="javascript" src="http://www.xinlogs.com/editor/fckeditor/editor/plugins/insertcode/excute.js" type="text/javascript"></script>
</div>


<p>我们会在导出的信息中看到如下的一串字符</p>

<div>
<div>
<pre>INSERT INTO "config" VALUES(4,'host_id','VmQ0NWFlMTdmYmQ3OGYzMzgyOTM0NWMzN2Q1MGFkOTIzCnAxCi4=
');</pre> </div>
</div>


<p>这个host_id就是机器的唯一标识，我们需要用它来跟自己的账户进行匹配，不过在这之前还有个工作需要做，因为上面的那长串字符很明显可以看出 是用base64编码后的结果，我们得先把它解码再说，注意这里<a target="_blank" href="http://www.vpser.net/go/dropbox">Dropbox</a>耍了个小花招，这串字符串前面的那个”V“，是无用的，我们在解码后的把它 忽略掉<br>
 
<strong>6、将base64字符串解码</strong>
 </p>

<p><strong> </strong></p>

<div class="codeText"><strong> <span><span>$ echo </span><span class="attribute">mQ0NWFlMTdmYmQ3OGYzMzgyOTM0NWMzN2Q1MGFkOTIzCnAxCi4</span><span>= ｜ base64 -d </span></span>
<div>
<ol class="dp-xml" style="border-bottom:0px;border-left:0px;list-style-type:none;margin-left:5px;border-top:0px;border-right:0px;">
<li><span>Vd45ae17fbd78f33829345c37d50ad923 </span></li>
    <li>
<span>p1 </span>     <link rel="stylesheet" type="text/css" href="http://www.xinlogs.com/editor/fckeditor/editor/plugins/insertcode/insertcode.css">
<script language="javascript" src="http://www.xinlogs.com/editor/fckeditor/editor/plugins/insertcode/excute.js" type="text/javascript"></script>
</li>
</ol>
</div>
</strong></div>


<p><strong> <pre>我的结果是Vd45ae17fbd78f33829345c37d50ad923，忽略掉”V“，就是d45ae17fbd78f33829345c37d50ad923</pre> </strong>
 
 
 
 
<strong>7、将账户信息与机器信息绑定</strong><br>
这步很简单，只需要访问以下网址，并登陆<br>
HOSTID替换成你刚才解码出来的那串字符就行了</p>

<pre><code>https://www.dropbox.com/cli_link?host_id=HOSTID</code></pre>


<p> <strong>8、建立dropbox的同步目录</strong><br>
dropbox的同步目录默认的是~/Dropbox</p>

<pre><code>$ mkdir ~/Dropbox</code></pre>


<p> <strong>9、运行，开始你的同步</strong>
<code>$ ~/.dropbox-dist/dropboxd &amp;</code>
到这里dropbox就可以正常运行并同步了，文章标题说的是备份网站数据，那么我们就来使我们的网站数据能够同步到dropbox服务器上<br>
其实很简单，就是建立符号连接而已，windows之前是没有这个功能的<br>
比如要备份/var/www这个目录</p>

<pre><code>cd ~/Dropbox
$ ln -s /var/www web_backup</code></pre>


<p> 这就可以了,或者要备份/e<a title="tc" target="_blank" href="http://wiki.lazyhack.net/tc">tc</a>目录</p>

<pre><code>$ cd ~/Dropbox
$ ln -s /etc etc_backup</code></pre>


<p> ok.发挥你的想象尽情的使用吧。<br>
 
<strong>推广</strong>
如果你看过这篇文章后，打算也使用dropbox。那么你可以使用我下面的链接注册
<a href="https://www.dropbox.com/referrals/NTU4NDMyNzI5">https://www.dropbox.com/referrals/NTU4NDMyNzI5</a>
采用这个链接注册，你会增加250M空间。注册后是2G，然后会给你再发封邮件告诉你已经提升到2.25G。而我也会增加250M空间。<div id="related_log" style="font-size:12px">
<b>相关日志：</b><a href="http://xinlogs.com/post/20">ubuntu下arp攻击防御和反击！</a><a href="http://xinlogs.com/post/16">一个很好的开源企业内部IM解决方案</a><a href="http://xinlogs.com/post/108">CentOS下的Tomcat停止脚本</a><a href="http://xinlogs.com/Tomcat-reboot-problems">解决Linux下Tomcat不能重启和停止问题</a><a href="http://xinlogs.com/php-eaccelerator-vs-fastcgi-cache">php eaccelerator vs fastcgi_cache性能比较</a>
</div></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/05/disable-mysql-query-log/">开启或者关闭MYSQL的query Log(查询日志)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-05T00:00:00+08:00" pubdate data-updated="true">Apr 5<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近在整理服务器的时候，发现mysql的查询日志文件占用了很多空间。这个查询日志文件部分内容如下，随着查询增加，会越来越大</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Tcp port: 3306 Unix socket: /tmp/mysql.sock
</span><span class='line'>Time Id Command Argument
</span><span class='line'>100404 8:36:49 1 Connect zzz@localhost on
</span><span class='line'>1 Init DB zzz
</span><span class='line'>1 Query SET NAMES 'utf8'
</span><span class='line'>1 Query SELECT * FROM `boblog_counter` LIMIT 0,1
</span><span class='line'>1 Query SELECT `blogid`,`pubtime`,`edittime`,`blogalias` FROM `boblog_blogs` WHERE `property`&lt;2 ORDER BY `pubtime`DESC LIMIT 0, 1500
</span><span class='line'>1 Quit
</span><span class='line'>100404 8:38:01 2 Connect admin@localhost on
</span><span class='line'>2 Init DB zzz
</span><span class='line'>2 Query SET NAMES 'utf8'
</span><span class='line'>2 Query SET sql_mode=''
</span><span class='line'>2 Query SELECT * FROM `cmseasy_settings` WHERE `tag`='table-fieldset' ORDER BY 1 DESC limit 1
</span><span class='line'>2 Init DB zzz
</span><span class='line'>2 Query SET NAMES 'utf8'
</span><span class='line'>2 Query SET sql_mode=''
</span><span class='line'>2 Query SELECT * FROM `cmseasy_user` WHERE userid&gt;0 ORDER BY 1 DESC limit 1
</span><span class='line'>2 Init DB zzz
</span><span class='line'>2 Query SET NAMES 'utf8'
</span><span class='line'>2 Query SET sql_mode=''
</span><span class='line'>2 Query SELECT count(typeid) as rec_sum FROM `cmseasy_type`
</span><span class='line'>2 Query SELECT * FROM `cmseasy_type` ORDER BY `order`,1 limit 1000
</span><span class='line'>2 Init DB zzz
</span><span class='line'>2 Query SET NAMES 'utf8'
</span><span class='line'>2 Query SET sql_mode=''
</span><span class='line'>2 Query SELECT count(1) as rec_sum FROM `cmseasy_friendlink` WHERE state&gt;0 and linktype=1
</span><span class='line'>2 Query SELECT * FROM `cmseasy_friendlink` WHERE state&gt;0 and linktype=1 ORDER BY listorder asc,id limit 20
</span><span class='line'>2 Init DB zzz
</span><span class='line'>2 Query SET NAMES 'utf8'
</span><span class='line'>2 Query SET sql_mode=''
</span><span class='line'>2 Query SELECT count(1) as rec_sum FROM `cmseasy_friendlink` WHERE state&gt;0 and linktype=1
</span><span class='line'>2 Query SELECT * FROM `cmseasy_friendlink` WHERE state&gt;0 and linktype=1 ORDER BY listorder asc,id limit 20
</span><span class='line'>2 Init DB zzz
</span><span class='line'>2 Query SET NAMES 'utf8'
</span><span class='line'>2 Query SET sql_mode=''
</span><span class='line'>2 Query SELECT * FROM `cmseasy_templatetag` WHERE name='å~E¬å~O¸ç®~@ä»~K' ORDER BY 1 DESC limit 1
</span><span class='line'>2 Init DB zzz
</span><span class='line'>2 Query SET NAMES 'utf8'
</span><span class='line'>2 Query SET sql_mode=''
</span><span class='line'>2 Query Describe cmseasy_archive
</span><span class='line'>2 Query SELECT count(1) as rec_sum FROM `cmseasy_archive` WHERE typeid in (2) and checked=1 and (state IS NULL or state&lt;&gt;'-1')
</span><span class='line'>2 Query SELECT * FROM `cmseasy_archive` WHERE typeid in (2) and checked=1 and (state IS NULL or state&lt;&gt;'-1') ORDER BY aid desc limit 4
</span></code></pre></td></tr></table></div></figure>


<p>其实记录的都是mysql执行的一些select语句，对于正常运行的服务器，我觉得基本没有必要保留这些日志。</p>

<p>关键是怎么关闭，这个日志的开启与否，可以通过mysql里提交如下命令查看</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>show variables like 'log';</span></code></pre></td></tr></table></div></figure>


<p>如果现实 log 的值是 ON就代码开启，如果是OFF就代表关闭</p>

<p>我们可以通过my.cnf配置文件进行配置</p>

<p>在my.cnf文件里，加入general-log = 0就关闭了这个查询日志。如果是general-log = 1就开启了这个查询日志。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/05/alipay-godaddy/">支付宝支付godaddy的郁闷经历</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-05T00:00:00+08:00" pubdate data-updated="true">Apr 5<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近帮朋友弄了个网站并注册了域名。</p>

<p>注册域名的时候，选择域名注册商，我原来用的namecheap.com 后来网上看很多人推荐name.com和godaddy.com。</p>

<p>因为godaddy.com支持支付宝，我就选择了godaddy来注册。</p>

<p>其实上面提到的三家都不错，godaddy域名价格最便宜。按照网站提示注册，购买域名，然后支付宝付款。</p>

<p>郁闷就开始。。。。</p>

<p>支付宝显示付款成功，但是godaddy购买的域名还在购物车中，并没有购买成功。</p>

<p><img src="http://farm9.staticflickr.com/8099/8513704243_1d8fb87879_z.jpg" alt="付款成功截图" /></p>

<p>我开始发邮件询问godaddy是什么情况。。。下面是我接到的回复。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>
</span><span class='line'>    Thank you for contacting customer support. Unfortunately, products purchased with Alipay may not be available for up to 13 hours while Alipay confirms that the funds have been received. A receipt does not display until the products are available in the account. If this time frame has passed since your initial purchase, please let us know so we may troubleshoot further.   
</span><span class='line'>      
</span><span class='line'>    I apologize if I have misunderstood your question. If you find this information does not help you, please reply to this email with a revised description of the issue you  are having.   
</span><span class='line'>      
</span><span class='line'>    If we can assist you further in this matter please let us know.   
</span><span class='line'>      
</span><span class='line'>    Sincerely,   
</span><span class='line'>    Jesse P   
</span><span class='line'>    Online Support Team  
</span></code></pre></td></tr></table></div></figure>


<p>告诉我支付宝支付需要13个小时的确认时间？？？</p>

<p>我继续发信说明我注册域名是为了立即使用，13小时太长了，我去name.com注册了。他们回信却告诉我，可以退款，但退款周期是5-7个工作日。。。</p>

<p>以前用paypal支付过，都是支付后，域名马上可以使用。这次的支付宝支付太郁闷了。</p>

<p>不过godaddy确实大公司，不用担心他们不退款。我2010-03-31 09:24:44支付成功的，他们在2010-04-02 10:46:22已经将钱打回我支付宝了。</p>

<p>为了以后购买域名不郁闷，我当天下午就去申请里双币信用卡。以后都用paypal支付了。在这里提醒下大家，如果要用支付宝支付godaddy来购买域名，请耐心等待确认支付，而且这个期间不要修改购物车内容，不然会信息支付和购物车不符合而造成购买失败。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/17/HTC-Hero-Openvpn/">HTC Hero G3 Openvpn设置</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-17T00:00:00+08:00" pubdate data-updated="true">Mar 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>现在YouTube和google博客等站点都被屏蔽，为了打破限制，只能用vpn来穿越了。</p>

<p>原来一直用pptpd类型vpn，这种类型速度快，但是要求防火墙或者网关支持。对内外支持不好（反正我在单位和家里歌华宽带都不支持）</p>

<p>后来改用openvpn类型的vpn了，发现虽然openvpn配置麻烦，需要安装客户端。但却是对内网支持良好，穿透能力强。</p>

<p>openvpn可以支持多系统（服务器我肯定用linux，这里多系统主要指客户端）</p>

<p>Windows系统可以采用openvpn gui，这个在我博客以前文章提到了，今天要说的是我的手机，htc hero这次也可以让手机连接openvpn服务器上youtube等站点了。</p>

<p><strong>手机型号及系统</strong></p>

<p>我的手机是HTC hero g3</p>

<p>采用的ROM是Flyzup制作的基于android 1.5修改的。</p>

<p>Rom可以到Flyzup网站下载
<a href="http://www.innovative-space.com/2010/02/21/flzyup-custom-rom-v1-6-final-release/">http://www.innovative-space.com/2010/02/21/flzyup-custom-rom-v1-6-final-release/</a></p>

<p>其实只要手机用的Rom可以支持openvpn，存在tun.so文件就可以</p>

<p><strong>安装相关软件</strong></p>

<p>首先需要需要安装openvpn，这个软件我们可以到下面地址下载已经编译好的版本。因为是static编译的，所以不需要任何动态库支持直接解压就可以使用。
<a href="http://github.com/downloads/fries/android-external-openvpn/openvpn-static-2.1.1.bz2">http://github.com/downloads/fries/android-external-openvpn/openvpn-static-2.1.1.bz2</a></p>

<p>将解压后得到的openvpn-static-2.1.1文件改名为openvpn 并拷贝到手机的/system/xbin/目录下</p>

<p>我是采用手机上安装的Better Terminal Emulator Pro来操作的，也可以用adb连接上usb操作。</p>

<p>有了openvpn后，我们还要创建两个软连接才可以让后面的openvpn顺利建立连接</p>

<p>用Better Terminal Emulator Pro进入终端模式，输入如下命令</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mkdir /system/xbin/bb
</span><span class='line'>ln -s /system/xbin/ifconfig /system/xbin/bb/ifconfig
</span><span class='line'>ln -s /system/xbin/route /system/xbin/bb/route</span></code></pre></td></tr></table></div></figure>


<p>上面创建两个命令的软连接，是因为后面安装的TunnelDroid软件，总是调用/system/xbin/bb目录下的命令，如果没有命令，就会出错。</p>

<p>用google的电子市场，查找TunnelDroid软件，安装TunnelDroid软件。</p>

<p><strong>配置TunnelDroid</strong></p>

<p>其实和配置Windows下的客户端一样，也需要一个配置文件和3个密钥文件</p>

<p>我们在sd卡的跟目录创建openvpn目录</p>

<p>在openvpn目录放入client.ovpn配置文件和ca.crt、client-1.crt和client-1.key密钥文件</p>

<p>这样启动TunnelDroid后，就会出现client.ovpn的选项，直接选择连接就可以。上面的配置文件和密钥，我都是从配置好的Windows机器拷贝过来的。</p>

<p>目前我测试的android手机、windowsxp、windows7和Linux全部都可以连接openvpn服务器。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/15/OpenVPN-Install/">CentOS 5.3下OpenVPN安装和Win7下OpenVPN GUI安装</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-15T00:00:00+08:00" pubdate data-updated="true">Mar 15<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>本来我是在美国的VPS服务器上安装的pptp vpn，这个vpn可以用windows自带的拨号连接，配置也很方便。刚配置好的时候很好用，可以开youtube也可以访问一些被封闭的站点。但是后来家里的歌华有线好像调整了一些路由配置，导致我在家里就不能连接vpn了。单位也不能连接。我用老婆家里的adsl尝试连接正常，用联通3G连接也正常。。。。这个既然是网络的问题，估计个人也解决不了了</p>

<p>最近单位也开始搞起来封锁了，开心、verycd等都被封。。。又不能用pptpd vpn了。。。看来该想想其他办法了。代理尝试了，不管用，看来不是基于域名的限制。
于是就开始尝试采用openvpn了。</p>

<p>参考了</p>

<p><a href="http://www.throx.net/2008/04/13/openvpn-and-centos-5-installation-and-configuration-guide/">http://www.throx.net/2008/04/13/openvpn-and-centos-5-installation-and-configuration-guide/</a></p>

<p><a href="http://www.xiaohui.com/dev/server/20070514-install-openvpn.htm">http://www.xiaohui.com/dev/server/20070514-install-openvpn.htm</a></p>

<p><strong>2010年10月14日更新</strong></p>

<p>加入官方CentOS下,iptables规则修改.保证顺利nat上网</p>

<p><strong>整体方案</strong></p>

<p>采用位于美国的CentOS 5.3 Linux服务器搭建openvpn服务器，并通过iptables的nat功能使openvpn服务器当做客户端网关。</p>

<p>客户端安装OpenVPN GUI程序连接服务器</p>

<p><strong>服务器</strong></p>

<p>服务器采用位于美国的vps,系统CentOS 5.3</p>

<p>安装openvpn作为vpn服务器软件</p>

<p><strong>OpenVPN服务器安装</strong></p>

<p>kernel 需要<strong>支持 tun 设备</strong>, 需要加载 iptables 模块.</p>

<p>检查 tun 是否安装:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>modinfo tun
</span><span class='line'>     
</span><span class='line'>或者
</span><span class='line'>     
</span><span class='line'>find / -name tun.o -print
</span></code></pre></td></tr></table></div></figure>


<p>安装需要的相关软件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> yum install rpm-build
</span><span class='line'> yum install autoconf.noarch
</span><span class='line'> yum install zlib-devel
</span><span class='line'> yum install pam-devel
</span><span class='line'> yum install openssl-devel</span></code></pre></td></tr></table></div></figure>


<p>安装环境准备好后，我们下载需要安装的软件。一共需要下载两个软件openvpn 2.0.9和lzo-1.08-4</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>wget http://openvpn.net/release/openvpn-2.0.9.tar.gz
</span><span class='line'>wget http://openvpn.net/release/lzo-1.08-4.rf.src.rpm</span></code></pre></td></tr></table></div></figure>


<p>安装lzo</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rpmbuild --rebuild lzo-1.08-4.rf.src.rpm
</span><span class='line'>rpm -Uvh /usr/src/redhat/RPMS/i386/lzo-*.rpm
</span><span class='line'>
</span><span class='line'>安装openvpn
</span></code></pre></td></tr></table></div></figure>


<p>rpmbuild -tb openvpn-2.0.9.tar.gz
rpm -Uvh /usr/src/redhat/RPMS/i386/openvpn-2.0.9-1.i386.rpm</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>安装后，复制配置文件
</span></code></pre></td></tr></table></div></figure>


<p>cp -r /usr/share/doc/openvpn-2.0.9/easy-rsa/ /etc/openvpn/
cp /usr/share/doc/openvpn-2.0.9/sample-config-files/server.conf /etc/openvpn/</p>

<p>配置生成CA脚本需要的配置文件vars</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>vi /etc/openvpn/easy-rsa/vars</span></code></pre></td></tr></table></div></figure>


<p>打开vars后，找到文件最后的如下内容</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>export KEY_COUNTRY=KG
</span><span class='line'>export KEY_PROVINCE=NA
</span><span class='line'>export KEY_CITY=BISHKEK
</span><span class='line'>export KEY_ORG="OpenVPN-TEST"
</span><span class='line'>export KEY_EMAIL="me@myhost.mydomain"</span></code></pre></td></tr></table></div></figure>


<p>根据自己信息修改上面内容,下面是具体含义</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>export KEY_COUNTRY=KG 设置国家
</span><span class='line'>export KEY_PROVINCE=NA 设置省份
</span><span class='line'>export KEY_CITY=BISHKEK 设置城市
</span><span class='line'>export KEY_ORG="OpenVPN-TEST" 设置组织
</span><span class='line'>export KEY_EMAIL="me@myhost.mydomain" 设置邮件</span></code></pre></td></tr></table></div></figure>


<p>设置好后，执行如下命令</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd /etc/openvpn/easy-rsa/
</span><span class='line'>. ./vars
</span><span class='line'>./clean-all</span></code></pre></td></tr></table></div></figure>


<p>注意上面的. ./vars两个点之间有一个空格</p>

<p>建立CA证书</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>./build-ca</span></code></pre></td></tr></table></div></figure>


<p>生成后，ls keys 可以看到ca.crt ca.key文件</p>

<p>建立服务器密钥</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>./build-key-server xinlogs</span></code></pre></td></tr></table></div></figure>


<p>注意这里的xinlogs是我给密钥起的名字，可以根据个人情况修改</p>

<p>生成Diffie-Hellman文件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>./build-dh</span></code></pre></td></tr></table></div></figure>


<p>以上文件都正确生成后，拷贝文件到正确目录</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd /etc/openvpn/easy-rsa/
</span><span class='line'>cp keys/ca.crt ../
</span><span class='line'>cp keys/dh1024.pem ../
</span><span class='line'>cp keys/xinlogs.key ../
</span><span class='line'>cp keys/xinlogs.crt ../</span></code></pre></td></tr></table></div></figure>


<p>生成客户端密钥</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>./build-key client-1</span></code></pre></td></tr></table></div></figure>


<p>这里client-1是客户端密钥的文件名，如果需要创建多个客户端密钥，就修改client-1名字多次生成即可。</p>

<p>修改/etc/openvpn/server.conf配置</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>
</span><span class='line'>    local 204.74.212.217
</span><span class='line'>    #修改local后面ip为服务器地址
</span><span class='line'>     
</span><span class='line'>    dev tap
</span><span class='line'>    ;dev tun
</span><span class='line'>    #默认是dev tun修改为dev tap,tap是可以路由模式 tun 是以太网隧道模式。具体区别我也不太清楚
</span><span class='line'>     
</span><span class='line'>    ca ca.crt
</span><span class='line'>    cert xinlogs.crt
</span><span class='line'>    key xinlogs.key
</span><span class='line'>    #cert后面修改为生成的服务器crt文件xinlogs.crt
</span><span class='line'>    #key后面修改为生成的服务器key文件xinlogs.key
</span><span class='line'>    dh dh1024.pem
</span><span class='line'>    #dh后面修改问生成的dh1024.pem
</span><span class='line'>    server 10.8.0.0 255.255.255.0
</span><span class='line'>    #server后面基本就用默认的10.8.0.0 255.255.255.0即可
</span><span class='line'>    ifconfig-pool-persist ipp.txt
</span><span class='line'>    #这个默认的ipp.txt就可以
</span><span class='line'>    push "route 10.8.0.0 255.255.255.0"
</span><span class='line'>    #添加客户端路由
</span><span class='line'>    push "redirect-gateway"
</span><span class='line'>    #修改客户端默认路由
</span><span class='line'>    push "dhcp-option DNS 8.8.8.8"
</span><span class='line'>    #修改客户端默认dns
</span><span class='line'>    client-to-client
</span><span class='line'>    #允许连接到vpn的客户端可以互相访问
</span><span class='line'>    duplicate-cn
</span><span class='line'>    keepalive 10 120
</span><span class='line'>    comp-lzo
</span><span class='line'>    #启用lzo压缩
</span><span class='line'>    user nobody
</span><span class='line'>    group nobody
</span><span class='line'>    persist-key
</span><span class='line'>    persist-tun
</span><span class='line'>    status /var/log/openvpn-status.log
</span><span class='line'>    log /var/log/openvpn.log
</span><span class='line'>    log-append /var/log/openvpn.log
</span><span class='line'>    verb 3
</span></code></pre></td></tr></table></div></figure>


<p><strong>启动停止openvpn</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>service openvpn start
</span><span class='line'>#启动openvpn服务
</span><span class='line'> 
</span><span class='line'>service openvpn stop
</span><span class='line'>#停止openvpn服务</span></code></pre></td></tr></table></div></figure>


<p><strong>配置iptables</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j SNAT --to-source 214.174.212.217
</span><span class='line'>#上面命令最后的214.174.212.217是服务器的公网地址，需要根据自己情况修改
</span><span class='line'>service iptables save</span></code></pre></td></tr></table></div></figure>


<p>确认net.ipv4.ip_forward = 1后，服务器就全部配置完成。</p>

<p>如果是用的CentOS官方版本,不是VPS.那因为它自带的iptables规则限制,还需要在/etc/sysconfig/iptables加入下面语句才可以顺利nat上网</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-A RH-Firewall-1-INPUT -i tap+ -j ACCEPT  </span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat /etc/sysctl.conf |grep forward
</span><span class='line'># Controls IP packet forwarding
</span><span class='line'>net.ipv4.ip_forward = 1
</span><span class='line'> 
</span><span class='line'>#如果不是1，请用vi修改/etc/sysctl.conf文件</span></code></pre></td></tr></table></div></figure>


<p><strong>Win7下Openvpn GUI安装</strong></p>

<p>从 http://openvpn.se下载安装文件</p>

<p>Latest stable release: 1.0.3 with OpenVPN 2.0.9 (2006-10-17)</p>

<p>我们直接下载http://openvpn.se/files/install_packages/openvpn-2.0.9-gui-1.0.3-install.exe</p>

<p>注意：下载后，别着急双击安装。先右键属性，设置兼容模式为windosxp sp3 并用管理员身份运行。</p>

<p><img src="http://farm9.staticflickr.com/8378/8514766422_351fae319a.jpg" alt="openvpn gui 属性截图" /></p>

<p>然后再运行安装。</p>

<p><strong>客户端配置</strong></p>

<p>安装后，将服务器/etc/openvpn/easy-rsa/keys/目录下的ca.crt、client-1.crt和client-1.key三个文件拷贝到C:Program FilesOpenVPNconfig目录下</p>

<p>再将C:Program FilesOpenVPNsample-config目录下的client.ovpn文件拷贝到C:Program FilesOpenVPNconfig目录下。</p>

<p>在开始->所有程序里找到openvpn，进入里面右键点击OpenVPN GUI属性，同样修改兼容模式为windows xp sp3 以管理员运行</p>

<p>修改后，运行openvpn gui程序</p>

<p>正确运行后，电脑的右下角会出现openvpn的图标，右键点击选择Edit Config来修改客户端配置文件</p>

<p>下面是我全部客户端配置文件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>
</span><span class='line'>    ##############################################
</span><span class='line'>    # Sample client-side OpenVPN 2.0 config file #
</span><span class='line'>    # for connecting to multi-client server. #
</span><span class='line'>    # #
</span><span class='line'>    # This configuration can be used by multiple #
</span><span class='line'>    # clients, however each client should have #
</span><span class='line'>    # its own cert and key files. #
</span><span class='line'>    # #
</span><span class='line'>    # On Windows, you might want to rename this #
</span><span class='line'>    # file so it has a .ovpn extension #
</span><span class='line'>    ##############################################
</span><span class='line'>     
</span><span class='line'>    # Specify that we are a client and that we
</span><span class='line'>    # will be pulling certain config file directives
</span><span class='line'>    # from the server.
</span><span class='line'>    client
</span><span class='line'>     
</span><span class='line'>    # Use the same setting as you are using on
</span><span class='line'>    # the server.
</span><span class='line'>    # On most systems, the VPN will not function
</span><span class='line'>    # unless you partially or fully disable
</span><span class='line'>    # the firewall for the TUN/TAP interface.
</span><span class='line'>    dev tap
</span><span class='line'>    ;dev tun
</span><span class='line'>     
</span><span class='line'>    # Windows needs the TAP-Win32 adapter name
</span><span class='line'>    # from the Network Connections panel
</span><span class='line'>    # if you have more than one. On XP SP2,
</span><span class='line'>    # you may need to disable the firewall
</span><span class='line'>    # for the TAP adapter.
</span><span class='line'>    ;dev-node MyTap
</span><span class='line'>     
</span><span class='line'>    # Are we connecting to a TCP or
</span><span class='line'>    # UDP server? Use the same setting as
</span><span class='line'>    # on the server.
</span><span class='line'>    ;proto tcp
</span><span class='line'>    proto udp
</span><span class='line'>     
</span><span class='line'>    # The hostname/IP and port of the server.
</span><span class='line'>    # You can have multiple remote entries
</span><span class='line'>    # to load balance between the servers.
</span><span class='line'>    remote 214.174.212.217 1194
</span><span class='line'>    ;remote my-server-2 1194
</span><span class='line'>     
</span><span class='line'>    # Choose a random host from the remote
</span><span class='line'>    # list for load-balancing. Otherwise
</span><span class='line'>    # try hosts in the order specified.
</span><span class='line'>    ;remote-random
</span><span class='line'>     
</span><span class='line'>    # Keep trying indefinitely to resolve the
</span><span class='line'>    # host name of the OpenVPN server. Very useful
</span><span class='line'>    # on machines which are not permanently connected
</span><span class='line'>    # to the internet such as laptops.
</span><span class='line'>    resolv-retry infinite
</span><span class='line'>     
</span><span class='line'>    # Most clients don't need to bind to
</span><span class='line'>    # a specific local port number.
</span><span class='line'>    nobind
</span><span class='line'>     
</span><span class='line'>    # Downgrade privileges after initialization (non-Windows only)
</span><span class='line'>    ;user nobody
</span><span class='line'>    ;group nobody
</span><span class='line'>     
</span><span class='line'>    # Try to preserve some state across restarts.
</span><span class='line'>    persist-key
</span><span class='line'>    persist-tun
</span><span class='line'>     
</span><span class='line'>    # If you are connecting through an
</span><span class='line'>    # HTTP proxy to reach the actual OpenVPN
</span><span class='line'>    # server, put the proxy server/IP and
</span><span class='line'>    # port number here. See the man page
</span><span class='line'>    # if your proxy server requires
</span><span class='line'>    # authentication.
</span><span class='line'>    ;http-proxy-retry # retry on connection failures
</span><span class='line'>    ;http-proxy [proxy server] [proxy port #]
</span><span class='line'>     
</span><span class='line'>    # Wireless networks often produce a lot
</span><span class='line'>    # of duplicate packets. Set this flag
</span><span class='line'>    # to silence duplicate packet warnings.
</span><span class='line'>    ;mute-replay-warnings
</span><span class='line'>     
</span><span class='line'>    # SSL/TLS parms.
</span><span class='line'>    # See the server config file for more
</span><span class='line'>    # description. It's best to use
</span><span class='line'>    # a separate .crt/.key file pair
</span><span class='line'>    # for each client. A single ca
</span><span class='line'>    # file can be used for all clients.
</span><span class='line'>    ca ca.crt
</span><span class='line'>    cert client-1.crt
</span><span class='line'>    key client-1.key
</span><span class='line'>     
</span><span class='line'>    # Verify server certificate by checking
</span><span class='line'>    # that the certicate has the nsCertType
</span><span class='line'>    # field set to "server". This is an
</span><span class='line'>    # important precaution to protect against
</span><span class='line'>    # a potential attack discussed here:
</span><span class='line'>    # http://openvpn.net/howto.html#mitm
</span><span class='line'>    #
</span><span class='line'>    # To use this feature, you will need to generate
</span><span class='line'>    # your server certificates with the nsCertType
</span><span class='line'>    # field set to "server". The build-key-server
</span><span class='line'>    # script in the easy-rsa folder will do this.
</span><span class='line'>    ;ns-cert-type server
</span><span class='line'>     
</span><span class='line'>    # If a tls-auth key is used on the server
</span><span class='line'>    # then every client must also have the key.
</span><span class='line'>    ;tls-auth ta.key 1
</span><span class='line'>     
</span><span class='line'>    # Select a cryptographic cipher.
</span><span class='line'>    # If the cipher option is used on the server
</span><span class='line'>    # then you must also specify it here.
</span><span class='line'>    ;cipher x
</span><span class='line'>     
</span><span class='line'>    # Enable compression on the VPN link.
</span><span class='line'>    # Don't enable this unless it is also
</span><span class='line'>    # enabled in the server config file.
</span><span class='line'>    comp-lzo
</span><span class='line'>     
</span><span class='line'>    # Set log file verbosity.
</span><span class='line'>    verb 3
</span><span class='line'>     
</span><span class='line'>    # Silence repeating messages
</span><span class='line'>    ;mute 20
</span><span class='line'>     
</span><span class='line'>    route-method exe
</span><span class='line'>    route-delay 2
</span></code></pre></td></tr></table></div></figure>


<p>其实主要修改的就是如下地方
复制内容到剪贴板</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>client
</span><span class='line'>#说明这个是客户端配置文件
</span><span class='line'> 
</span><span class='line'>dev tap
</span><span class='line'>;dev tun
</span><span class='line'>#这个和服务器一样就可以
</span><span class='line'> 
</span><span class='line'>remote 214.174.212.217 1194
</span><span class='line'>#这个ip要修改为服务器的公网ip地址
</span><span class='line'> 
</span><span class='line'>resolv-retry infinite
</span><span class='line'>nobind
</span><span class='line'>persist-key
</span><span class='line'>persist-tun
</span><span class='line'> 
</span><span class='line'> 
</span><span class='line'>ca ca.crt
</span><span class='line'>cert client-1.crt
</span><span class='line'>key client-1.key
</span><span class='line'>#上面三行一定要根据自己生成的密钥配合
</span><span class='line'> 
</span><span class='line'>comp-lzo
</span><span class='line'>#启用lzo压缩
</span><span class='line'> 
</span><span class='line'># Set log file verbosity.
</span><span class='line'>verb 3
</span><span class='line'> 
</span><span class='line'>route-method exe
</span><span class='line'>route-delay 2 
</span><span class='line'>
</span><span class='line'>#最后这两行win7如果不加上，就不能启动修改路由，导致拨vpn成功，但是不能通过远程服务器做网关上网</span></code></pre></td></tr></table></div></figure>


<p>这些配置完成后，右键点openvpn gui在桌面右下角图标选择Connect连接</p>

<p>我正确连接后的日志如下</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>
</span><span class='line'>    Mon Mar 15 13:03:14 2010 OpenVPN 2.0.9 Win32-MinGW [SSL] [LZO] built on Oct 1 2006
</span><span class='line'>    Mon Mar 15 13:03:14 2010 IMPORTANT: OpenVPN's default port number is now 1194, based on an official port number assignment by IANA. OpenVPN 2.0-beta16 and earlier used 5000 as the default port.
</span><span class='line'>    Mon Mar 15 13:03:14 2010 WARNING: No server certificate verification method has been enabled. See http://openvpn.net/howto.html#mitm for more info.
</span><span class='line'>    Mon Mar 15 13:03:14 2010 LZO compression initialized
</span><span class='line'>    Mon Mar 15 13:03:14 2010 Control Channel MTU parms [ L:1574 D:138 EF:38 EB:0 ET:0 EL:0 ]
</span><span class='line'>    Mon Mar 15 13:03:14 2010 Data Channel MTU parms [ L:1574 D:1450 EF:42 EB:135 ET:32 EL:0 AF:3/1 ]
</span><span class='line'>    Mon Mar 15 13:03:14 2010 Local Options hash (VER=V4): 'd79ca330'
</span><span class='line'>    Mon Mar 15 13:03:14 2010 Expected Remote Options hash (VER=V4): 'f7df56b8'
</span><span class='line'>    Mon Mar 15 13:03:14 2010 UDPv4 link local: [undef]
</span><span class='line'>    Mon Mar 15 13:03:14 2010 UDPv4 link remote: 204.74.212.217:1194
</span><span class='line'>    Mon Mar 15 13:03:16 2010 TLS: Initial packet from 204.74.212.217:1194, sid=3d4cf00a 84deb309
</span><span class='line'>    Mon Mar 15 13:03:18 2010 VERIFY OK: depth=1, /C=US/ST=Beijing/L=BEIJING/O=xinlogs.com/CN=babodx/emailAddress=babodx@gmail.com
</span><span class='line'>    Mon Mar 15 13:03:18 2010 VERIFY OK: depth=0, /C=US/ST=Beijing/O=xinlogs.com/CN=babodx/emailAddress=babodx@gmail.com
</span><span class='line'>    Mon Mar 15 13:03:20 2010 Data Channel Encrypt: Cipher 'BF-CBC' initialized with 128 bit key
</span><span class='line'>    Mon Mar 15 13:03:20 2010 Data Channel Encrypt: Using 160 bit message hash 'SHA1' for HMAC authentication
</span><span class='line'>    Mon Mar 15 13:03:20 2010 Data Channel Decrypt: Cipher 'BF-CBC' initialized with 128 bit key
</span><span class='line'>    Mon Mar 15 13:03:20 2010 Data Channel Decrypt: Using 160 bit message hash 'SHA1' for HMAC authentication
</span><span class='line'>    Mon Mar 15 13:03:20 2010 Control Channel: TLSv1, cipher TLSv1/SSLv3 DHE-RSA-AES256-SHA, 1024 bit RSA
</span><span class='line'>    Mon Mar 15 13:03:20 2010 [babodx] Peer Connection Initiated with 214.174.212.217:1194
</span><span class='line'>    Mon Mar 15 13:03:21 2010 SENT CONTROL [babodx]: 'PUSH_REQUEST' (status=1)
</span><span class='line'>    Mon Mar 15 13:03:21 2010 PUSH: Received control message: 'PUSH_REPLY,route 10.8.0.0 255.255.255.0,redirect-gateway,dhcp-option DNS 8.8.8.8,route-gateway 10.8.0.1,ping 10,ping-restart 120,ifconfig 10.8.0.3 255.255.255.0'
</span><span class='line'>    Mon Mar 15 13:03:21 2010 OPTIONS IMPORT: timers and/or timeouts modified
</span><span class='line'>    Mon Mar 15 13:03:21 2010 OPTIONS IMPORT: --ifconfig/up options modified
</span><span class='line'>    Mon Mar 15 13:03:21 2010 OPTIONS IMPORT: route options modified
</span><span class='line'>    Mon Mar 15 13:03:21 2010 OPTIONS IMPORT: --ip-win32 and/or --dhcp-option options modified
</span><span class='line'>    Mon Mar 15 13:03:21 2010 TAP-WIN32 device [本地连接 3] opened: .Global{A958F4F2-14AF-49E6-9FBF-4FC25B8D8786}.tap
</span><span class='line'>    Mon Mar 15 13:03:21 2010 TAP-Win32 Driver Version 8.4
</span><span class='line'>    Mon Mar 15 13:03:21 2010 TAP-Win32 MTU=1500
</span><span class='line'>    Mon Mar 15 13:03:21 2010 Notified TAP-Win32 driver to set a DHCP IP/netmask of 10.8.0.3/255.255.255.0 on interface {A958F4F2-14AF-49E6-9FBF-4FC25B8D8786} [DHCP-serv: 10.8.0.0, lease-time: 31536000]
</span><span class='line'>    Mon Mar 15 13:03:21 2010 Successful ARP Flush on interface [29] {A958F4F2-14AF-49E6-9FBF-4FC25B8D8786}
</span><span class='line'>    Mon Mar 15 13:03:23 2010 TEST ROUTES: 2/2 succeeded len=1 ret=1 a=0 u/d=up
</span><span class='line'>    Mon Mar 15 13:03:23 2010 route ADD 214.174.212.217 MASK 255.255.255.255 192.168.2.1
</span><span class='line'>    操作完成!
</span><span class='line'>    Mon Mar 15 13:03:23 2010 route DELETE 0.0.0.0 MASK 0.0.0.0 192.168.2.1
</span><span class='line'>    操作完成!
</span><span class='line'>    Mon Mar 15 13:03:23 2010 route ADD 0.0.0.0 MASK 0.0.0.0 10.8.0.1
</span><span class='line'>    操作完成!
</span><span class='line'>    Mon Mar 15 13:03:23 2010 route ADD 10.8.0.0 MASK 255.255.255.0 10.8.0.1
</span><span class='line'>    操作完成!
</span><span class='line'>    Mon Mar 15 13:03:23 2010 Initialization Sequence Completed
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/8/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/6/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
<h1>Categories</h1>
<ul id="categories">
  <li class='category'><a href='/blog/categories/css/'>CSS (2)</a></li>
<li class='category'><a href='/blog/categories/cloudstack/'>Cloudstack (1)</a></li>
<li class='category'><a href='/blog/categories/database/'>Database (10)</a></li>
<li class='category'><a href='/blog/categories/game/'>Game (15)</a></li>
<li class='category'><a href='/blog/categories/hardware/'>Hardware (9)</a></li>
<li class='category'><a href='/blog/categories/host/'>Host (3)</a></li>
<li class='category'><a href='/blog/categories/java/'>Java (3)</a></li>
<li class='category'><a href='/blog/categories/life/'>Life (3)</a></li>
<li class='category'><a href='/blog/categories/linux/'>Linux (50)</a></li>
<li class='category'><a href='/blog/categories/mac/'>Mac (5)</a></li>
<li class='category'><a href='/blog/categories/mobile/'>Mobile (8)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>Octopress (2)</a></li>
<li class='category'><a href='/blog/categories/php/'>PHP (14)</a></li>
<li class='category'><a href='/blog/categories/plan/'>Plan (1)</a></li>
<li class='category'><a href='/blog/categories/rails/'>Rails (5)</a></li>
<li class='category'><a href='/blog/categories/ruby/'>Ruby (2)</a></li>
<li class='category'><a href='/blog/categories/software/'>Software (7)</a></li>
<li class='category'><a href='/blog/categories/vim/'>Vim (1)</a></li>
<li class='category'><a href='/blog/categories/virtualization/'>Virtualization (9)</a></li>
<li class='category'><a href='/blog/categories/website/'>Website (4)</a></li>
<li class='category'><a href='/blog/categories/windows/'>Windows (10)</a></li>
<li class='category'><a href='/blog/categories/git/'>git (1)</a></li>
<li class='category'><a href='/blog/categories/rails/'>rails (1)</a></li>
<li class='category'><a href='/blog/categories/vim/'>vim (1)</a></li>

</ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/14/railszhong-wen-wen-ti/">rails中文问题</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/03/kuai-su-pei-zhi-vimhe-macvim/">快速配置vim和macvim</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/28/emlogqian-yi-dao-octopress/">emlog迁移到octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/24/git-first-on-ubuntu/">git-first-on-ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/20/wo-2013nian-xue-xi-lie-biao/">我2013年学习列表</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - babodx -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
