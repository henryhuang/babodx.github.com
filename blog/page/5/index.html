
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>鑫的方向</title>
  <meta name="author" content="babodx">

  
  <meta name="description" content="这个站点有很多关于debian系统管理的信息和经验。
不过这个站点对于IE支持不好，页面会出现错位。建议还是采用firefox或者chrome这类的浏览器吧。
网址：http://www.debian-administration.org/
简介如下，照搬的原文： Debian &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://babodx.github.com/blog/page/5/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="鑫的方向" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">鑫的方向</a></h1>
  
    <h2>简单就是不简单！</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:babodx.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/service">运维服务</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/25/debian-administration-site/">一个关于debian系统管理的站点</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-25T00:00:00+08:00" pubdate data-updated="true">Oct 25<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这个站点有很多关于debian系统管理的信息和经验。
不过这个站点对于IE支持不好，页面会出现错位。建议还是采用firefox或者chrome这类的浏览器吧。
网址：<a href="http://www.debian-administration.org/">http://www.debian-administration.org/</a>
简介如下，照搬的原文：</p>

<h1>Debian Administration</h1>


<p>This site was created as a simple weblog designed to contain interesting and useful information related to the System Administration of <a href="http://www.debian.org/">Debian GNU/Linux</a> systems.
Whilst there are several sites where users can post questions and have answers contributed by other users there are no other sites on the web which are specifically targeted at distributing articles of interest to Debian administrators.
This site is designed to fill that void, with content accepted from users.
Feel free to <a href="http://www.debian-administration.org/create/user">create your own account</a> and <a href="http://www.debian-administration.org/create/article">contribute an article, tip, or question</a> you may also <a href="http://www.debian-administration.org/create/poll">submit a poll</a>.
User accounts aren&#8217;t necessary but they do allow you to do several additional things:</p>

<ul>
<li>See your own comment and story posting history </li>
<li>Bookmark articles, polls, or weblogs of interest to you. </li>
<li>
<a href="http://www.debian-administration.org/about/FAQ%20:%20Tags">Tag articles</a>. </li>
<li>
<a href="http://www.debian-administration.org/about/FAQ%20:%20Site%20Adverts">Disable the adverts</a> shown upon article pages. <ul>
<li>Or <a href="http://www.debian-administration.org/create/advert">Create your own advert</a> </li>
</ul>
</li>
<li>Create and post weblog entries. </li>
<li>Ensure the use of our <a href="http://www.debian-administration.org/about/SSL%20Certificate">SSL certificate</a> by always using https://. </li>
</ul>


<p>From your account page you can customize several aspects of the site - such as which sections are displayed in the sidebar, whether to receive notifications if other people reply to your comments, etc.
It should be noted that this site is neither an official part of the Debian project, nor endorsed by it. <a href="http://www.debian.org/">The Debian project</a> has its own official website, and the name Debian is a trademark held by <a href="http://www.spi-inc.org/">Software In the Public Interest</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/25/bo-blog-to-emlog/">微博从bo-blog迁移到了emlog。</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-25T00:00:00+08:00" pubdate data-updated="true">Oct 25<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>今天将微博从原来的bo-blog迁移到了emlog</p>

<p>bo-blog从08年就一直开始使用。感觉还是很不错的。但是一直没怎么更新了，目前很多新功能都不支持。</p>

<p>其实我就打算让博客可以和新浪微博同步。新浪微博里也有个关联博客的功能，据说可以通过博客的rss内容来同步内容。</p>

<p>但是我参考网上文章修改了bo-blog模板，让首页里存在
<link rel="alternate" type="application/rss+xml" href="<a href="http://www.xinlogs.com/feed">http://www.xinlogs.com/feed</a>&#8220;  title=&#8221;鑫的方向&#8221; />
然后又测试了<a href="http://www.xinlogs.com/feed">http://www.xinlogs.com/feed</a>，可以正常访问。
但是新浪微博就是不能同步到我博客的内容。
 
最后我发现emlog目前的更新很活跃，而且还有个插件是调用新浪微博的api来将博客内容同步到微博的。就开始了我的迁移过程
迁移主要参考了<a href="http://bbs.bo-blog.com/thread-28348-1-1.html">http://bbs.bo-blog.com/thread-28348-1-1.html</a>
原文如下：
转换过程很简单，先下载并安装emlog_4.0.1，再将原BoBlog中的attachment和data文件夹以及附件中的转换工具上传到新装emlog根目录，执行转换工具按照提示运行即可。<br><br>
        最终可以将BoBlog中的所有数据比较完美地导入emlog_4.0.1，包括原来BoBlog中的附件和自定义URL等等。对于emlog不支持UBB的问题其实应该很好解决：将UBB解析之后再导入数据库即可。由于我的777篇日志绝大部分不含UBB代码所以就没有继续折腾了……
<strong>注意：</strong>
我转换后，没有文章的分类了。但是查看数据库的sort表确实存在分类信息。这个时候，只要在后台建立一个分类。然后其他分类就都出现了。感觉转换效果很不错。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/21/htc-g3-hero-bast-rom/">推荐个htc G3 hero比较不错的ROM</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-21T00:00:00+08:00" pubdate data-updated="true">Oct 21<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>以前一直用ligux出的rom。因为htc G3的硬件原因，个人认为用android 2.1rom最好。刷了2.2和2.3都不是很满意。
原来我一直采用Dauu_SENSE_with_Compacache_BFS_v1.1-signed.zip
挺稳定的，就是速度一般。有时候内存不够了，会自动重启。
这次是在hiapk.com上找到的
<a href="http://bbs.hiapk.com/thread-2539001-1-1.html">新加坡Artlive2.1急速优化版、添加翻页时钟、天气动画；视频为证</a>
这个ROM是先刷上他的ROM，然后再刷一个<span style="color:#ff0000;font-size:large;">FlyKernel-13-M518-m352.zip</span><br>
 
FlyKernel是一个用来只能调整CPU性能的补丁，在刷rom的时候，通过压缩包的文件名制定频率。比如上面的M518-m352就是最大和最小频率。
关于这个内核补丁，可以看下面的介绍
<a href="http://www.cnrgb.com/flykernel-13">http://www.cnrgb.com/flykernel-13</a>
 </p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/20/centos-install-ruby-rubygems/">Centos 源码安装ruby和rubygems</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-20T00:00:00+08:00" pubdate data-updated="true">Oct 20<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>获得ruby源代码</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>wget http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.2-p290.tar.gz</span></code></pre></td></tr></table></div></figure>


<p><strong>解压并编译ruby</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>tar zxvf ruby-1.9.2-p290.tar.gz  
</span><span class='line'>cd ruby-1.9.2-p290
</span><span class='line'>./configure --prefix=/usr/local/ruby192
</span><span class='line'>make
</span><span class='line'>make install</span></code></pre></td></tr></table></div></figure>


<p>在/etc/profile最后添加</p>

<p><code>export PATH=/usr/local/ruby192/bin:$PATH</code></p>

<p>保存后，执行
<code>source /etc/profile</code></p>

<p>查看下ruby版本
<code>ruby -v</code></p>

<p><strong>下载rubygems1.8.10</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>wget http://production.cf.rubygems.org/rubygems/rubygems-1.8.10.tgz</span></code></pre></td></tr></table></div></figure>


<p><strong>解压并安装rubygems</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>tar zxvf rubygems-1.8.10.tgz &lt;br&gt;
</span><span class='line'>cd rubygems-1.8.10
</span><span class='line'>ruby setup.rb</span></code></pre></td></tr></table></div></figure>


<p>安装后用<code>gem -v</code> 可以查看下版本</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/20/boblog-relation-weibo/">关联bo-blog到新浪微博</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-20T00:00:00+08:00" pubdate data-updated="true">Oct 20<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>主要参考了<a href="http://www.cnwyw.net/post/bo-blog-guan-lian-bo-ke-xin-lang-wei-bo/">http://www.cnwyw.net/post/bo-blog-guan-lian-bo-ke-xin-lang-wei-bo/</a>
基本就是修改模板里的elements.php文件
将href=&#8221;feed.php&#8221;修改为href=<a href="http://yourdomain/feed.php">http://yourdomain/feed.php</a>
 </p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/20/boblog-add-weiboshow/">给bo-blog加上新浪的微博秀</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-20T00:00:00+08:00" pubdate data-updated="true">Oct 20<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>首先在新浪微博的“微博小工具”内找到“微博秀”。然后根据自己的需要设置好样式和大小。
从下面的</p>

<p><dt>“设置完成，获得嵌入代码： ”框内粘贴出代码。</dt>
<dt></dt></p>

<p><dt>回到bo-blog后台，从“常规管理”->“模块配置”项了，添加一个“侧边模块”，起个名字叫新浪微博。</dt>
<dt></dt>
<dt>最后将刚才的代码贴进去。就可以了</dt></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/21/h3c-ttl-expires/">H3C路由器 Tracert超时，解决办法。</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-21T00:00:00+08:00" pubdate data-updated="true">Sep 21<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>单位的H3C路由器和交换机上，tracert总是超时。但是可以正常上网或者ping到目标。
后来查找资料，找到了解决办法。</p>

<p>解决方法：</p>

<p>    ip ttl-expires enable     ip unreachables enable</p>

<p>（官方说法这两条命令默认开启，可能跟版本有关，有的默认未开启。）</p>

<p>官方对这两条命令解释是：</p>

<p>ip ttl-expires enable命 令用来开启设备的ICMP超时报文的发送功能。undo ip ttl-expires命令用来关闭设备的ICMP超 时报文的发送功能。（缺省情况下，ICMP超时报文发送功能处于开启状 态。）</p>

<p>需要注意的是，关闭ICMP超时报文发送 功能后，设备不会再发送“TTL超时”ICMP差 错报文，但“重组超时”ICMP差错报文仍会正常发送。</p>

<p>ip unreachables enable命 令用来开启设备的ICMP目的不可达报文的发送功能。undo ip unreachables命令用来关闭设备的ICMP目 的不可达报文的发送功能。（缺省情况下，ICMP目的不可达报文发送功 能处于关闭状态。）
 </p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/30/mysqldump_blob_field/">Mysqldump备份blob类型内容</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-30T00:00:00+08:00" pubdate data-updated="true">Mar 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>用mysqldump备份出数据库内容到SQL文件。当我们数据库表有blob类型字段的时候，这个导出的SQL再导入的时候就会因为blob字段内容乱码等原因，不能顺利导入了。</p>

<p><strong>解决办法：</strong></p>

<p>在用mysqldump备份的时候，采用&#8211;hex-blob参数，这样备份出来的sql文件，就可以顺利导入了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/22/ruby_import_dbf_to_mysql/">ruby将DBF文件导入MYSQL库</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-22T00:00:00+08:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>单位招生项目，需要向MySQL灌入一些数据测试。因为原始数据都是DBF文件，就是foxpro数据库。</p>

<p>下面是用ruby代码实现的导入功能。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>require 'rubygems'
</span><span class='line'>require 'dbf'
</span><span class='line'>require 'mysql2'
</span><span class='line'>require 'iconv'
</span><span class='line'>@the_year="2011"
</span><span class='line'>@start_time=Time.now
</span><span class='line'>@major_list=[]
</span><span class='line'>client = Mysql2::Client.new(:host =&gt; "localhost", :username =&gt; "root",:password=&gt;"dxzddp",:database=&gt;"enroll")#创建数据库连接
</span><span class='line'>results = client.query("SELECT major_id FROM major WHERE the_year='#{@the_year}'", :as =&gt; :array)
</span><span class='line'>results.each do |row|
</span><span class='line'>@major_list.push(row[0])
</span><span class='line'>end
</span><span class='line'>p @major_list
</span><span class='line'>table = DBF::Table.new("d:/ss.dbf")
</span><span class='line'>table.each do |record|
</span><span class='line'>@sfzh=record.sfzh
</span><span class='line'>@name=Iconv.iconv("utf-8", "gb18030", record.xm)
</span><span class='line'>@sfzh=record.sfzh
</span><span class='line'>@ksh=record.ksh
</span><span class='line'>@major=@major_list.choice
</span><span class='line'>@major2=@major_list.choice
</span><span class='line'>@major2=@major_list.choice while @major2==@major
</span><span class='line'>@to_student_info="insert into student_info (student_no,access_pwd,the_year) VALUES ('#{@sfzh}','e10adc3949ba59abbe56e057f20f883e','#{@the_year}')"
</span><span class='line'>@to_candidate="insert into candidate (candidate_name,id_card_no,candidate_no,state,has_submitted,the_year) VALUES ('#{@name}','#{@sfzh}','#{@ksh}','A','Y','#{@the_year}')"
</span><span class='line'>@to_candidate_ideal="insert into candidate_ideal (candidate_id,first_major,second_major,allow_adjustment,is_living_in_college) VALUES (last_insert_id(),'#{@major}','#{@major2}','Y','Y')"
</span><span class='line'>@to_candidate_score="insert into candidate_score (candidate_id) VALUES (last_insert_id())"
</span><span class='line'>@to_contact_info="insert into contact_info (candidate_id) VALUES (last_insert_id())"
</span><span class='line'>@to_school_info="insert into school_info (candidate_id) VALUES (last_insert_id())"
</span><span class='line'>begin
</span><span class='line'>client.query(@to_student_info)
</span><span class='line'>client.query(@to_candidate)
</span><span class='line'>client.query(@to_candidate_ideal)
</span><span class='line'>client.query(@to_candidate_score)
</span><span class='line'>client.query(@to_contact_info)
</span><span class='line'>client.query(@to_school_info)
</span><span class='line'>rescue Mysql2::Error=&gt;e
</span><span class='line'>puts e.to_s
</span><span class='line'>end
</span><span class='line'>end
</span><span class='line'>client=nil if client
</span><span class='line'>p Time.now-@start_time
</span></code></pre></td></tr></table></div></figure>


<p>大体思路就是</p>

<p>1、建立数据库连接</p>

<p>2、查询招生专业major</p>

<p>3、打开dbf文件</p>

<p>4、每读取一行，想Mysql数据库写入一行，随机生成报考专业</p>

<p>5、关闭数据库连接</p>

<p>6、打印出用时</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/14/mysqldump-encoding/">Mysqldump解决中文乱码问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-14T00:00:00+08:00" pubdate data-updated="true">Mar 14<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>我的数据库采用编码如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql&gt; show variables like 'coll%';
</span><span class='line'>+----------------------+-------------------+
</span><span class='line'>| Variable_name        | Value             |
</span><span class='line'>+----------------------+-------------------+
</span><span class='line'>| collation_connection | latin1_swedish_ci |
</span><span class='line'>| collation_database   | latin1_swedish_ci |
</span><span class='line'>| collation_server     | latin1_swedish_ci |
</span><span class='line'>+----------------------+-------------------+
</span><span class='line'>3 rows in set (0.00 sec)
</span><span class='line'> 
</span><span class='line'>mysql&gt; show variables like 'character_set%';
</span><span class='line'>+--------------------------+----------------------------+
</span><span class='line'>| Variable_name            | Value                      |
</span><span class='line'>+--------------------------+----------------------------+
</span><span class='line'>| character_set_client     | latin1                     |
</span><span class='line'>| character_set_connection | latin1                     |
</span><span class='line'>| character_set_database   | latin1                     |
</span><span class='line'>| character_set_filesystem | binary                     |
</span><span class='line'>| character_set_results    | latin1                     |
</span><span class='line'>| character_set_server     | latin1                     |
</span><span class='line'>| character_set_system     | utf8                       |
</span><span class='line'>| character_sets_dir       | /usr/share/mysql/charsets/ |
</span><span class='line'>+--------------------------+----------------------------+
</span><span class='line'>8 rows in set (0.00 sec)</span></code></pre></td></tr></table></div></figure>


<p> 
数据库的编码采用utf8</p>

<p>开始用mysqldump出来的都是乱码。后来采用 &#8211;default-character-set=gbk参数，然后再用iconv转码为utf8就解决了问题。</p>

<p>下面是我的数据库备份脚本</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/sh   
</span><span class='line'>#####configurate#######   
</span><span class='line'>rq=`date +%Y%m%d%N`   
</span><span class='line'>user="user"  
</span><span class='line'>password="password"  
</span><span class='line'>rm -rf /var/lib/mysql/mysql-bin.*   
</span><span class='line'>mysqldump -u$user -p$password --default-character-set=gbk --single-transaction --flush-logs --master-data=2 mydatabase&gt;/home/ict/mysql_backup/database$rq.sql   
</span></code></pre></td></tr></table></div></figure>


<p>导出后转码</p>

<p><code>iconv -t utf-8 -f gbk -c database.sql&gt;databaseutf8.sql</code></p>

<p>这样已经可以看到正确的中文了。</p>

<p><strong>导入</strong></p>

<p>在windows下，如果采用HeidiSQL打开SQL文件，可以正确看到中文，但是导入后还是乱码。</p>

<p>解决办法，采用记事本打开，选择另存为，编码选择ANSI。然后再用HeidiSQL工具打开导入即可。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/6/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/4/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>公告:</h1>
  <p>博客从原来的emlog迁移到了octopress。正在学习当中，原来的文章基本转移过来了。</p>
</section>
<section>
<h1>Categories</h1>
<ul id="categories">
  <li class='category'><a href='/blog/categories/css/'>CSS (2)</a></li>
<li class='category'><a href='/blog/categories/cloudstack/'>Cloudstack (1)</a></li>
<li class='category'><a href='/blog/categories/database/'>Database (10)</a></li>
<li class='category'><a href='/blog/categories/game/'>Game (15)</a></li>
<li class='category'><a href='/blog/categories/hardware/'>Hardware (9)</a></li>
<li class='category'><a href='/blog/categories/host/'>Host (3)</a></li>
<li class='category'><a href='/blog/categories/java/'>Java (3)</a></li>
<li class='category'><a href='/blog/categories/life/'>Life (3)</a></li>
<li class='category'><a href='/blog/categories/linux/'>Linux (50)</a></li>
<li class='category'><a href='/blog/categories/mac/'>Mac (5)</a></li>
<li class='category'><a href='/blog/categories/mobile/'>Mobile (8)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>Octopress (2)</a></li>
<li class='category'><a href='/blog/categories/php/'>PHP (14)</a></li>
<li class='category'><a href='/blog/categories/plan/'>Plan (1)</a></li>
<li class='category'><a href='/blog/categories/rails/'>Rails (6)</a></li>
<li class='category'><a href='/blog/categories/ruby/'>Ruby (2)</a></li>
<li class='category'><a href='/blog/categories/software/'>Software (7)</a></li>
<li class='category'><a href='/blog/categories/vim/'>Vim (2)</a></li>
<li class='category'><a href='/blog/categories/virtualization/'>Virtualization (9)</a></li>
<li class='category'><a href='/blog/categories/website/'>Website (4)</a></li>
<li class='category'><a href='/blog/categories/windows/'>Windows (10)</a></li>
<li class='category'><a href='/blog/categories/git/'>git (1)</a></li>

</ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/14/railszhong-wen-wen-ti/">rails中文问题</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/03/kuai-su-pei-zhi-vimhe-macvim/">快速配置vim和macvim</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/28/emlogqian-yi-dao-octopress/">emlog迁移到octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/24/git-first-on-ubuntu/">git-first-on-ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/20/wo-2013nian-xue-xi-lie-biao/">我2013年学习列表</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - babodx -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
