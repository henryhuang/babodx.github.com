
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>鑫的方向</title>
  <meta name="author" content="babodx">

  
  <meta name="description" content="原来单位的存储一直是分两个800G的区，挂在到Windows下。Windows的系统总要担心病毒，所以打算迁移到CentOS Linux下。 参考了http://blog.s135.com/post/415/这篇文章，但是他的文章里是单控制器，并且没有用到光纤。所以配置上有些不同 硬件配置 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://babodx.github.com/blog/page/8/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="鑫的方向" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">鑫的方向</a></h1>
  
    <h2>简单就是不简单！</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:babodx.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/12/HP-MSA1000-DL380G5-Centos5/">CentOS 5.4 基于HP Proliant DL380 G5服务器配置Modular Smart Array 1000存储</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-12T00:00:00+08:00" pubdate data-updated="true">Mar 12<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>原来单位的存储一直是分两个800G的区，挂在到Windows下。Windows的系统总要担心病毒，所以打算迁移到CentOS Linux下。</p>

<p>参考了<a href="http://blog.s135.com/post/415/">http://blog.s135.com/post/415/</a>这篇文章，但是他的文章里是单控制器，并且没有用到光纤。所以配置上有些不同</p>

<p><strong>硬件配置</strong></p>

<ul>
<li>一台HP MSA 1000存储设备（包含两个Modular Smart Array 1000控制器）</li>
<li>一台HP Storage SAN 4/8光纤交换机</li>
<li>一台HP Proliant DL380 G5 2U服务器</li>
<li>七块SCSI 300G硬盘</li>
<li>一块HP StorageWorks FC1142SR 4GB PCI-E 光纤卡</li>
</ul>


<p><img src="http://farm9.staticflickr.com/8085/8512593854_1e49c77451.jpg" alt="硬件图片MSA1000" /></p>

<p>从两个Modular Smart Array 1000的控制器后面连接光纤到光纤交换机。然后将光纤卡安装到服务器上，用光纤连接光纤卡到光纤交换机。</p>

<p><img src="http://farm9.staticflickr.com/8233/8511486023_2fd88da704.jpg" alt="hba" />
<img src="http://farm9.staticflickr.com/8532/8511486191_d0cc8c932f.jpg" alt="hba2" /></p>

<p><strong>软件配置</strong></p>

<p>先对各种硬件的fireware进行下更新。</p>

<p>从惠普网站下载update fireware光盘，下载的文件为firmware-8.60-0.zip，大小463M左右，然后解压刻成光盘</p>

<p>下载地址<a href="ftp://ftp.hp.com/pub/softlib2/software1/cd/p1040529012/v53483/firmware-8.60-0.zip">ftp://ftp.hp.com/pub/softlib2/software1/cd/p1040529012/v53483/firmware-8.60-0.zip</a></p>

<p>用光盘启动服务器，然后安装提示做就可以。它会更新网卡、服务器等设备的fireware。都是自动检测并更新的，很简单</p>

<p>确保各种fireware都更新后，下面需要用到smartstart光盘来对存储进行配置了</p>

<p>从惠普网站下载smartstart光盘，下载的文件smartstart-8.30-0-x86.zip，大小576M左右，也是解压刻录光盘</p>

<p>下载地址<a href="ftp://ftp.hp.com/pub/softlib2/software1/cd/p1040463476/v49882/smartstart-8.30-0-x86.zip">ftp://ftp.hp.com/pub/softlib2/software1/cd/p1040463476/v49882/smartstart-8.30-0-x86.zip</a></p>

<p>然后用光盘启动服务器，按照提示进入后，选择第2项配置存储卡，第一项是用来安装操作系统的，我发现没有Linux的操作系统。。。都是Windows系列。</p>

<p>可以发现服务器自己的raid卡 HP Smart Array E200和MSA 1000存储。</p>

<p>我是先将服务器的3块硬盘组成一个Raid 5，然后再配置MSA 1000的存储，也是将7块盘组成Raid 5。我看了下资料，说raid 6比raid5要损失8%-15%的性能，但是可以保证同时坏2块盘不丢失数据。不过我觉得raid5够用了。</p>

<p>因为是双控制器，我这里的fireware是4.48所以采用的是active/standby模式。如果打算用active/active模式，需要更新fireware到7.0版本</p>

<p>用smartstart光盘做好raid后，就可以给服务器安装系统了。</p>

<p><strong>安装CentOS 5.4 64bit</strong></p>

<p>安装CentOS 5.4 64bit版本前，先将连接到服务器的光纤拔掉，要不系统总是提示/dev/sda不可读取，这里的sda就是我们存储。
一切安装正常安装就可以。</p>

<p>正常安装后，连接好光纤，再启动服务器。</p>

<p>这个时候因为没有安装驱动，服务器在启动过程中会报很多end_request: error</p>

<p>而且我还发现如果不安装驱动，我们可以通过fdisk -l查找到存储设备，但是每次重启或者存储关机再开，存储的设备名都会变，有时候是/dev/sda有时候是/dev/sdb。所以很难在/etc/fstab里写入mount的配置。</p>

<p>安装HBA卡驱动</p>

<p>到HP网站下载驱动
<a href="http://h20000.www2.hp.com/bizsupport/TechSupport/SoftwareIndex.jsp?lang=en&amp;cc=us&amp;prodNameId=1809832&amp;prodTypeId=12169&amp;prodSeriesId=1809835&amp;swLang=8&amp;taskId=135&amp;swEnvOID=4004">http://h20000.www2.hp.com/bizsupport/TechSupport/SoftwareIndex.jsp?lang=en&amp;cc=us&amp;prodNameId=1809832&amp;prodTypeId=12169&amp;prodSeriesId=1809835&amp;swLang=8&amp;taskId=135&amp;swEnvOID=4004</a></p>

<p>也可以直接下载
<a href="ftp://ftp.hp.com/pub/softlib/software10/COL19426/co-74973-1/hp_qla2x00-2009-03-17.tar.gz">ftp://ftp.hp.com/pub/softlib/software10/COL19426/co-74973-1/hp_qla2x00-2009-03-17.tar.gz</a></p>

<p><a href="ftp://ftp.hp.com/pub/softlib/software11/COL28061/co-69719-3/hp-fc-enablement-2009-12-16.tar.gz">ftp://ftp.hp.com/pub/softlib/software11/COL28061/co-69719-3/hp-fc-enablement-2009-12-16.tar.gz</a></p>

<p>上面两个文件，一个是qla2x00的驱动，后面一个是Linux fibre channel enablement kits for QLogic HBAs and mezzanine cards</p>

<p>下载后解压安装</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Installation instructions
</span><span class='line'> 
</span><span class='line'>Download the appropriate driver kit for your distribution. The driver kit file will be in the format hp_qla2x00-yyyy-mm-dd.tar.gz.
</span><span class='line'>Copy the driver kit to the target system.
</span><span class='line'>Uncompress and untar the driver kit using the following command:
</span><span class='line'># tar zxvf hp_qla2x00-yyyy-mm-dd.tar.gz
</span><span class='line'>Change directory to the hp_qla2x00-yyyy-mm-dd directory.
</span><span class='line'>Execute the INSTALL command.
</span><span class='line'>The INSTALL command syntax will vary depending on your conﬁguration. If a previous driver kit is installed, you can invoke the INSTALL command without any arguments as the script will use the currently loaded conﬁguration:
</span><span class='line'># ./INSTALL
</span><span class='line'>To force the installation to failover mode, use the -f ﬂag:
</span><span class='line'># ./INSTALL -f
</span><span class='line'>To force the installation to single-path mode, use the -s ﬂag:
</span><span class='line'># ./INSTALL -s
</span><span class='line'>Use the -h option of the INSTALL script for a list of all supported arguments. The INSTALL script will install the appropriate driver RPM for your conﬁguration, as well as the appropriate ﬁbreutils RPM. Once the INSTALL script is ﬁnished, you will either have to reload the QLogic driver modules (qla2xxx, qla2300, qla2400, qla2xxx_conf) or reboot your server.
</span><span class='line'>The commands to reload the driver are:
</span><span class='line'># /opt/hp/src/hp_qla2x00src/unload.sh
</span><span class='line'># modprobe qla2xxx_conf
</span><span class='line'># modprobe qla2xxx
</span><span class='line'># modprobe qla2300
</span><span class='line'># modprobe qla2400
</span><span class='line'>The command to reboot the server is:
</span><span class='line'># reboot
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>CAUTION: If your boot device is a SAN attached device you will have to reboot your server.
</span><span class='line'>
</span><span class='line'>To verify which RPM versions are installed, use the rpm command with the -q option.
</span><span class='line'>For example:
</span><span class='line'># rpm -q hp_qla2x00src
</span><span class='line'># rpm –q fibreutils</span></code></pre></td></tr></table></div></figure>


<p>然后在继续安装HP Fibre Channel Enablement Kit</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Installing the HP Fibre Channel Enablement Kit
</span><span class='line'> 
</span><span class='line'>To install the HP Fibre Channel Enablement Kit, do the following:
</span><span class='line'>Download the hp-fc-enablement-yyyy-mm-dd.tar.gz file for your operating system and copy it to the target server
</span><span class='line'>Untar the enablement kit by executing the command to create the directory, hp-fc-enablement-yyyy-mm-dd.
</span><span class='line'># tar zxvf hp-fc-enablement-yyyy-mm-dd.tar.gz
</span><span class='line'>Browse to the directory hp-fc-enablement-yyyy-mm-dd.
</span><span class='line'>Do one of the following to execute the install.sh script.
</span><span class='line'>If you are not using Device Mapper multipathing execute the following command:
</span><span class='line'># ./install.sh -s
</span><span class='line'>If you are using Device Mapper multipathing execute the following command:
</span><span class='line'># ./install.sh -m
</span><span class='line'>The hp-fc-enablement and fibreutils RPMs should be installed once this install completes. To verify the installation, enter the following commands:
</span><span class='line'># rpm -q hp-fc-enablement
</span><span class='line'># rpm -q fibreutils
</span><span class='line'>
</span><span class='line'>NOTE: For use with the driver that comes with the kernel you will need fibreutils 3.x or greater.
</span></code></pre></td></tr></table></div></figure>


<p>全部完成后，我们需要查看下/etc/modprobe.conf
如果有下面图中标记的一些信息加入，说明上面的驱动安装正确。</p>

<p><img src="http://farm9.staticflickr.com/8378/8512177477_69fd3f3534_z.jpg" alt="msa1000配置图片" /></p>

<p>确实正确后，我们重启下服务器。</p>

<p>当再次进入系统后，我们的存储应该被识别为/dev/sda设备</p>

<p>用fdisk -l /dev/sda查看下，如果没有问题了，就可以使用fdisk /dev/sda进行分区</p>

<p>我是把全部1.6T分成一个区/dev/sda1</p>

<p>然后e2lable /dev/sda1 /data给卷标</p>

<p>在/etc/fstab文件里加入/dev/sda1的挂着位置</p>

<p>这样以后每次启动系统，就自动将存储挂着到系统的/data目录中了。如下图</p>

<p><img src="http://farm9.staticflickr.com/8112/8512182419_1370b691bf.jpg" alt="存储mount成功" /></p>

<p><strong>总结</strong></p>

<p>本来参考<a href="www.s135.com">http://www.s135.com</a>博主的文章配置的，后来发现因为用了光纤卡，不安装驱动会有问题。还有就是双控制器的active/active和active/standby模式需要通过刷新不同的fireware实现。总得来说这个存储配置起来不难，安装官方文档和网络上一些文档就可以。写这篇文档就是为了记录下自己的配置过程，省的以后再配置还要到处找文档查资料。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/12/HP-Computer-Ghost-Problem/">HP台式机器，ghost系统后，提示windows Could Not Start</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-12T00:00:00+08:00" pubdate data-updated="true">Mar 12<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>今天单位一台HP dx7518的台式机器，ghost了一个winxp系统。但是只要一开机，就提示</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>windows could not start because of a computer disk hardware configuration problem    
</span><span class='line'>could not read from the selected boot disk check boot path and disk harware   
</span><span class='line'>please check the windows documentation about hardware disk configuation and your hardware refer once manuals for additional information   </span></code></pre></td></tr></table></div></figure>


<p>开始我以为是硬盘的设置问题，后来发现硬盘已经设置为IDE模式了。</p>

<p>后来网上查找，发现是和BIOS里的WDRT Support选项有关系。。。</p>

<p><strong>解决办法</strong></p>

<p>开机进入bios设置，选择Power management Setup 再选择WDRT Support 将后面值修改为disable</p>

<p>WDRT SUPPORT：watchdog resource table 一种加密狗。通过这种加密保护来拒绝安装非随机配备的操作系统。同样，全系的HP 家用、商用台式机、笔记本，进行GHOST安装后报错，也可以用此方法解决。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/02/12/HUAWEI-E1750-on-Win7/">win7下使用联通无线上网卡HUAWEI E1750</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-12T00:00:00+08:00" pubdate data-updated="true">Feb 12<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>老婆单位年底搞活动，抽奖中了一个联通的无线上网卡。型号HUAWEI E1750</p>

<p>本来打算给我笔记本用的，我系统是Windows 7。结果发现用不了，安装上以后，无线上网软件提示找不到设备。。。。。。</p>

<p><strong>解决办法</strong></p>

<p>让Windows 7自动找驱动，肯定是没戏了。用光盘自带软件的驱动也不灵。后来到HUAWEI网站查找最近驱动，最终下面网站找到了相关更新</p>

<p><code>http://www.huaweidevice.com/cn/downloadCenter.do?method=doListSoftwareid=1&amp;fla y=findsoftwareName=E1750</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>E1750 E1750-WINMACB300D00SP04C112( U TPS11[1].301.08.24.112_MAC11.3 01.06.07.112)(China Unicom) China Unicom  2009-12-23 </span></code></pre></td></tr></table></div></figure>


<p>以上是Win7下可以使用的驱动更新。大约28M</p>

<p>安装步骤是先安装Mobile_Card_Driver_3.09.exe驱动，然后正确识别设备后，运行UTPS11.301.08.24.112_MAC11.301.06.07.112.B433.exe更新设备的固件。最后再安装无线上网软件。</p>

<p>可是我安装文档的方法，在Win7下并没有成功，运行UTPS11.301.08.24.112_MAC11.301.06.07.112.B433.exe更新的时候，总是提示没有找到设备或者正在有软件占用设备或者没有管理员权限。。。。。</p>

<p>后来找了一台WinXP系统的机器，按照文档步骤一次成功。</p>

<p>然后再将更新过的E1750插到Win7上面，就可以自动识别设备了。识别成功后如下图。</p>

<p><img src="http://farm9.staticflickr.com/8251/8512574602_ee146a4011.jpg" alt="e1750驱动截图" /></p>

<p>这样继续安装无线上网软件就可以正确识别并上网了。下面是正确识别后的截图</p>

<p><img src="http://farm9.staticflickr.com/8105/8511465149_d5c86d6172.jpg" alt="e1750成功驱动" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/02/02/my-htc-hero-mobile/">我的新手机HTC Hero G3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-02T00:00:00+08:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>关注HTC hero G3很久了，大约从10月份开始吧。当时就和老婆说生日打算换个手机，后来生日当天去中关村看了看，但是没有购买，报价3000。关键是不知道怎么选购。回来后网上做功课，查询论坛和淘宝。最后决定在淘宝的一家北京实体店购买。在木樨园桥附近。2010年1月25日周一购买的。</p>

<p>购买的最终手机价格是2860元，又选购了8G TF卡，一块MOMAX电池+座充+车充+手机套。3370元。</p>

<p>购买后，由卖家给刷安逸1.2的ROM并给8G卡预装一些软件。</p>

<p>整体感觉比我原来用的windows手机eten x800速度快了不少。android系统也很漂亮。</p>

<p>我的联系人是先用Win7的windows mobile设备管理将原来windows手机的联系人导出到outlook，最后导出到excel并生成cvs文件。</p>

<p>然后导入到Gmail邮件的通讯录。这样通过hero G3的同步gmail联系人，就可以导入到新手机了。</p>

<p>感觉和gmail配合的相当好。短信也可以备份到gmail保存。</p>

<p><strong>刷机</strong></p>

<p>手机买来就开始装软件，尝试导航，使用感觉不错。不过在论坛学习，发现很多系统都比我这个新，就产生了刷机的想法。</p>

<p>开始先尝试刷radio。radio是负责手机通讯的模块，可以理解为电话用的驱动吧。</p>

<p>我原来的版本比较低，自己先尝试刷了63.18.55.06JU_6.35.09.26最新版本。</p>

<p><strong>刷radio办法</strong></p>

<p>机器买来的时候，又商家默认刷了啊兴的2.5 recovery。我就用了一个1G的卡，格式化为FAT32文件系统。将下载的radio更新文件拷贝到卡的根目录，并改名为update.zip</p>

<p>关闭手机，同时按Home+Power键进入recovery界面(就是小房子+开机键)。</p>

<p>等出现recovery界面，选择第2项，将sd卡上的update.zip刷入手机。</p>

<p>注意刷完后，一定要重启一次手机。</p>

<p>刷这个很简单，一会就完成了。感觉不错。呵呵</p>

<p>关于Rom的选择，我再论坛上找了很久，也发帖求助了很多高手。大家普遍认为安卓1.2就是稳定，但是速度很慢。</p>

<p>大家推荐我的主要是Flzyup的Rom和modaco的Rom</p>

<p>我怕Modaco的Rom中文支持不友好，就决定从Flzyup制作的Rom选择了。目前来说G3的Rom有基于android 1.5的，也有基于2.0</p>

<p>但是普遍认为2.0 Rom目前不成熟，毕竟官方没有出来呢。所以我就只选择基于android 1.5的Rom了。</p>

<p>F大（flzyup的亲切称呼）的Rom基于1.5系统的主要如下</p>

<ul>
<li><p><a href="http://www.innovative-space.com/2010/01/14/flzyup-custom-rom-v1-5-final/">FLZYUP Custom ROM v1.5 final(惊喜一)</a></p></li>
<li><p><a href="http://www.innovative-space.com/2010/01/10/flzyup-custom-rom-v1-4-paid-apps-new-icons/">FLZYUP Custom ROM v1.4 (Paid APPs+New ICONs)</a></p></li>
<li><p><a href="http://www.innovative-space.com/2009/12/23/flzyup_custom_rom_v1-3_final-large-me/">FLZYUP_Custom_ROM_v1.3_final大内存版本</a></p></li>
<li><p><a href="http://www.innovative-space.com/2009/12/07/flzyup-custom-rom-v1-3-release/">FLZYUP Custom ROM v1.3 final all fixed [特效包已发布]</a></p></li>
</ul>


<p>1.4版本是基于1.3的基础上优化完善的，1.5是基于全新内核制作的。</p>

<p>因为我看论坛上很多人反映F大1.5版本耗电，本来G3也就坚持2天，如果刚买手机经常玩，1天就够呛了。。。所以没敢使用这个费电的新版本。我保守的选择了1.4版本。</p>

<p><strong>准备刷机</strong></p>

<p>论坛坚持了2天，大家一直讨论刷那个版本好，可以参考<a href="http://www.androidin.net/bbs/thread-51055-1-1.html">http://www.androidin.net/bbs/thread-51055-1-1.html</a></p>

<p>最终决定刷F大的1.4版本。看到F大1.4是自动支持app2sd技术的，但是前提是你的卡必须有ext分区。我的8G卡目前就1个Fat32分区，于是考虑先分区。</p>

<p>但是Win7没有找到合适的分区软件，后来发现xda论坛发布的<strong>RA-hero-v1.5.2</strong> recovery可以支持在手机的recovery模式给卡分区。我就先刷了这个recovery</p>

<p><strong>刷recovery</strong></p>

<p>主要参考<a href="http://forum.xda-developers.com/showthread.php?t=561124">http://forum.xda-developers.com/showthread.php?t=561124</a></p>

<p>There are several ways to install a custom recovery, choose the one that suits you most (I probably forgot a few).</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>via adb 
</span><span class='line'>-&gt; Requires a custom recovery (with test-keys) like Cyanogen's v1.4 or my previous recovery
</span><span class='line'>
</span><span class='line'>Copy recovery-RA-hero-v1.5.2.img to the root of your sdcard
</span><span class='line'>Boot into your current custom recovery (boot while holding HOME)
</span><span class='line'>Connect your Hero via usb to your pc/mac/...
</span><span class='line'>adb shell
</span><span class='line'>$su (not required if you have root already)
</span><span class='line'>#mount -a
</span><span class='line'>#flash_image recovery /sdcard/recovery-RA-hero-v1.5.2.img
</span></code></pre></td></tr></table></div></figure>


<p>我采用的上面这个方法安装的。</p>

<p>不过首先要在机器上安装adb工具和手机驱动</p>

<p>驱动采用网上下载的AndroidDriverFiles驱动程序.rar</p>

<p>adb本来是包含在android sdk工具里面的，但是sdk太大了，好几百兆。。。。我就在网上找了一个adb_win.zip的分离包。572k，就2个文件。</p>

<p>先将adb_win.zip解压缩，得到adb.exe和AdbWinApi.dll文件。将2个文件复制到Windows目录下的System32目录。</p>

<p>这样在windows的命令行窗口输入adb命令，可以看到如下输出</p>

<p>Android Debug Bridge version 1.0.20下面还有很多使用说明，就不用管了。</p>

<p>现在准备好adb了，再把AndroidDriverFiles驱动程序.rar解压到一个目录，准备连接手机的时候使用。</p>

<p>以上都准备好后，关闭手机，按Home+Power键进入recovery模式，将USB线连上电脑。如果提示安装驱动，就手动到AndroidDriverFiles驱动程序解压后的目录找。</p>

<p>驱动识别完成后，就打开windows的命令行窗口（Win+R，输入cmd回车）</p>

<p>输入adb shell</p>

<p>然后su回车</p>

<p>mount -a回车</p>

<p>上面的su和mount -a 都可能返回错误，不用管它。</p>

<p>最后输入flash_image recovery /sdcard/recovery-RA-hero-v1.5.2.img 回车。</p>

<p>这样就把新的recovery刷入了。</p>

<p>重启进入recovery模式，如图</p>

<p><img src="http://farm9.staticflickr.com/8096/8512558972_02deaf66fe.jpg" alt="recovery截图" /></p>

<p>然后在Wipe里面执行如下3项</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Wipe
</span><span class='line'>
</span><span class='line'>Wipe data/factory reset :: Wipe /data and /cache
</span><span class='line'>Wipe Dalvik-cache :: Wipe Dalvik-cache both on /data and ext
</span><span class='line'>Wipe SD:ext partition : Wipe the ext partition on your sdcard</span></code></pre></td></tr></table></div></figure>


<p>再给sd卡分区。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Partition sdcard
</span><span class='line'>
</span><span class='line'>Partition SD :: Interactive SD partitioning</span></code></pre></td></tr></table></div></figure>


<p>这样就给sd卡分好去了，我的8G卡，默认是32M的swap分区 512M的ext分区。最后是一个大的Fat32分区。
这样就可以关机了。</p>

<p><strong>刷FLZYUP_Custom_ROM_v1.4-signed.zip系统</strong></p>

<p>上面的准备工作全完成了，再来刷系统。</p>

<p>将分好区的sd卡，放到电脑读卡器上，从电脑将FLZYUP_Custom_ROM_v1.4-signed.zip拷贝到根目录。因为win7只能识别出FAT32分区，所以肯定是拷贝到FAT32分区上。</p>

<p>然后返回手机开机进入recovery模式，选择</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Flash zip from sdcard :: Flash a zip update file from your sdcard</span></code></pre></td></tr></table></div></figure>


<p>按照提示往下刷就可以了。刷好后提示如下</p>

<p><img src="http://farm9.staticflickr.com/8511/8511451731_17da3c1a26.jpg" alt="rom_update截图" /></p>

<p>然后重启手机就可以了。</p>

<p><strong>注意</strong></p>

<p>刷完后，第一次重启很慢很慢，这个正常。我当时以为手机刷坏了，总停在HTC那屏上。。。还到论坛发帖求助呢。。</p>

<p>后来发现第一次重启后，看到绿色小人和听到声音大约1分20秒，然后就是那个HTC三个字母的屏幕，大约等了10分钟。。。就会进入下面屏幕</p>

<p><img src="http://farm9.staticflickr.com/8369/8511453551_4a0cd686ef.jpg" alt="android 1.4" /></p>

<p>按照提示设置好手机，就可以享受新系统了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/28/E63-nokia-fireware-update/">诺基亚E63刷机</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-28T00:00:00+08:00" pubdate data-updated="true">Jan 28<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>前几天老婆的E63手机总是死机，一直在跟我抱怨。。。本来想给她买个iphone，结果老婆说不喜欢，还是喜欢她红色的E63.</p>

<p>我想想手机买了1年多了，也没有更新过，不如刷个新系统看看吧。于是就开始搜索资料、准备软件。</p>

<p>具体刷机步骤参考
<a href="http://nokia.zol.com.cn/188/297_1876549.html">http://nokia.zol.com.cn/188/297_1876549.html</a></p>

<p><strong>诺基亚刷机方法</strong></p>

<p>主要是官方刷新，还是用第三方软件刷新</p>

<p>官方的在线刷新就是用官方公布的软件直接更新手机的系统。但是官方更新只限于行货手机，因为官方是根据你手机的CODE号码来为你更新手机系统的，如果你手机的CODE是外国的，那刷新后，就没有中文系统了。所以这个不适合大多数水货手机</p>

<p>我查看了一下，老婆手机的CODE是0569944: 马来西亚的。用官方的估计不行，于是就开始考虑第三方软件。</p>

<p>发现比较著名的就是凤凰刷机工具了。</p>

<p>其实简单的说“凤凰刷机”就是刷机软件的一种，而非官方的刷机软件而已，由于其在性能上有官方刷机软件很多不能完成的任务，因而收到的机友的广泛追捧。</p>

<p><strong>准备工作</strong></p>

<p>首先是下载凤凰刷机软件</p>

<p>参考这里<a href="http://nokia.zol.com.cn/1/18_299.html">http://nokia.zol.com.cn/1/18_299.html</a></p>

<p>我下载的就是<a href="http://nokia.zol.com.cn/1/18_299.html">凤凰刷机2009.34.7.40015最新XX版09.10.30发布</a></p>

<p>下载好凤凰刷机软件后，就是备份手机存储卡上的内容和联系人了。我是直接用读卡器把存储卡拷贝到电脑，然后用诺基亚PC套件导出的联系人。</p>

<p>这些都弄好了，就可以进入刷机步骤了。</p>

<p><strong>刷机步骤</strong></p>

<p>安装好凤凰刷机软件，并打开</p>

<p>选择Tools->Image file download</p>

<p><img src="http://farm9.staticflickr.com/8103/8512516328_851a5902d7.jpg" alt="选择下载img" /></p>

<p>然后在Product code内输入你想刷的系统的code码，我这里输入的0569941，新加坡的版本</p>

<p>输入完成后，点download等待下载，大小在60-80M。</p>

<p>下载完成后，点cancel就可以了。</p>

<p>系统下载好了，我们就该向手机内刷了。用USB的数据线连接手机。在手机上选择PC套件模式。</p>

<p>然后选择凤凰2009的菜单file&#8212;manage connection，跳出菜单NO CONECTION，再点“NEW”按键。</p>

<p><img src="http://farm9.staticflickr.com/8508/8511405473_51583b1644_z.jpg" alt="new按钮" /> </p>

<p>按NEW键之后会出现下图：</p>

<p><img src="http://farm9.staticflickr.com/8100/8511406351_68da4dfd26_z.jpg" alt="new截图" /></p>

<p>选择USB后，按下一步，直到完成。这样连接里会才会出现USB和NO CONNECTIONS两个选择，一个是USB连接，一个是没有连接，如果是USB连接，表示手机正常。选择USB，点击“APPLY”按钮,然后点击Cancel，连接完成</p>

<p><img src="http://farm9.staticflickr.com/8226/8512518914_dfa06ce9ed_z.jpg" alt="usb1截图" />
<img src="http://farm9.staticflickr.com/8506/8512513418_7c9ca6b164_z.jpg" alt="usb2截图" /></p>

<p>菜单File ,open Product，系统会自动调出诺基亚各个型号的RM菜单，你选择自己的机型即可，比如诺基亚E63为RM-437，找到后点OK。</p>

<p><img src="http://farm9.staticflickr.com/8368/8512513018_73ca2419cd_z.jpg" alt="ok截图" /></p>

<p><img src="http://farm9.staticflickr.com/8386/8512512776_a4c75f2239_z.jpg" alt="ok截图2" /></p>

<p>选择RM-437的画面，在出现的提示框里找RM-437，选中，然后点OK，选择normal.</p>

<p>凤凰2009软件菜单Flashing&#8212;&#8211;Fireware Update,出现下面画面</p>

<p><img src="http://farm9.staticflickr.com/8240/8511400983_580969c8e8_z.jpg" alt="update截图" /></p>

<p>这里有一个非常关键的地方需要注意,就是上图选择RM-437之后,要注意看Product CODE:显示的CODE是多少,如果是欧版的CODE(比如0582481),那就需要你选择以下亚太的CODE的系统,选择你刚才下载的比如<font color="#000000" size="2">0569941</font>的系统. 点击下图右边的小方块(小方块上有省略号的那个)</p>

<p>想刷400.21.013的朋友，如果下载了400的固件，但是在这里没有找到400的话，可以来这里看下</p>

<p>凤凰菜单栏进入：TOOLS-Options-product locetion（下图）</p>

<p><img src="http://farm9.staticflickr.com/8107/8512512350_980a17dfbe_z.jpg" alt="locetion图" /></p>

<p>红色线标注的栏目原来是空白的，这里需要设置下路径，点右边的“add”添加路径如图所示，然后点“apply”确认后退出。</p>

<p>哈哈，看下图出现了400.21.013了</p>

<p><img src="http://farm9.staticflickr.com/8368/8511400657_7362511b0f_z.jpg" alt="截图" /></p>

<p>点击&#8221;Refurbish&#8221;开始刷机，在进入这个程序之后，无论计算机屏幕右下角出现什么提示，均不要搭理它，直到提示成功。</p>

<p><img src="http://farm9.staticflickr.com/8371/8511400551_ca21a4f98f_z.jpg" alt="截图" /> </p>

<p>到这里就算完成了。哈哈</p>

<p>以上内容基本都是从下面两篇帖子上转过来的。如果有什么不明白，可以直接去看原帖。我只是记录下，省的以后刷机还要找资料。</p>

<ul>
<li>[原创][教程]诺基亚E63用凤凰2009成功刷机</li>
<li>0300 凤凰2009成功刷 E63最新固件 400.21.013
 </li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/24/postfix-extmail-attachment-bug/">Postfix+extmail的附件大小显示和限制问题解决办法</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-24T00:00:00+08:00" pubdate data-updated="true">Jan 24<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近在给一个公司部署了postfix+extmail的邮件系统后，遇到了附件大小限制问题。</p>

<p>extmail默认设置是5M，但是由于extmail的统计大小方法问题，一般附件限制比设置的小了1/3。也就是你设置了5M，也就能到3M多。</p>

<p>这里先说下大小限制的配置。</p>

<p>一、修改extmail的webmail.cf文件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>SYS_MESSAGE_SIZE_LIMIT = 5242880 注意：以位为单位为5M字节。 
</span><span class='line'>
</span><span class='line'>SYS_MESSAGE_SIZE_LIMIT = xxx</span></code></pre></td></tr></table></div></figure>


<p>二、修改/etc/postfix/main.cf文件，</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>message_size_limit = xxx</span></code></pre></td></tr></table></div></figure>


<p>三、重启postfix即可，<code>service postfix restrart</code> 和重启apache，<code>service httpd restart</code></p>

<p><strong>如何解决附件限制大小和系统文件大小相差1/3呢？</strong></p>

<p>首先是修改/var/www/extsuite/extmail/libs/Ext/App目录下的Compose.pm文件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sub is_oversize {   
</span><span class='line'>    my $self = shift;   
</span><span class='line'>    my $sys = $self-&gt;{sysconfig};   
</span><span class='line'>    my $maxsize = $sys-&gt;{SYS_MESSAGE_SIZE_LIMIT};   
</span><span class='line'>    my $tsize = shift;   
</span><span class='line'>  
</span><span class='line'>    return 0 unless defined $maxsize and $maxsize &gt; 0;   
</span><span class='line'>    return 0 unless defined $tsize and $tsize &gt; 0;   
</span><span class='line'>  
</span><span class='line'>    if ($tsize &gt;= $maxsize) {   
</span><span class='line'>        return $maxsize;   
</span><span class='line'>    }   
</span><span class='line'>    0;   
</span><span class='line'>}   </span></code></pre></td></tr></table></div></figure>


<p>注意到上面的if ($tsize >= $maxsize)了吧，修改为if ($tsize >= 1.29*$maxsize)</p>

<p>这样修改后，基本extmail的附件限制大小就和系统显示的文件大小一样。</p>

<p>目前还有一个文件，就是我们上传一个1M的内容，显示出来的附件大小大约是1.3M，这个问题需要修改一个human函数解决。</p>

<p>在/var/www/extsuite/extmail/libs/Ext目录下，打开Utils.pm文件</p>

<p>找到如下函数</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sub human_size {   
</span><span class='line'>    my $s = $_[0];   
</span><span class='line'>    if($s&lt;1024) {   
</span><span class='line'>        return sprintf("%0.2f", $s/1024)."K";   
</span><span class='line'>    }elsif($s&lt;1024*1024) {   
</span><span class='line'>        return sprintf("%0.1f", $s/1024)."K";   
</span><span class='line'>    }else {   
</span><span class='line'>        return sprintf("%0.1f", $s/(1024*1024))."M";   
</span><span class='line'>    }   
</span><span class='line'>}   </span></code></pre></td></tr></table></div></figure>


<p>将函数修改如下</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sub human_size {   
</span><span class='line'>    my $s = $_[0];   
</span><span class='line'>    if($s&lt;1024) {   
</span><span class='line'>        return sprintf("%0.2f", $s/1024/1.36)."K";   
</span><span class='line'>    }elsif($s&lt;1024*1024) {   
</span><span class='line'>        return sprintf("%0.1f", $s/1024/1.36)."K";   
</span><span class='line'>    }else {   
</span><span class='line'>        return sprintf("%0.1f", $s/(1024*1024*1.36))."M";   
</span><span class='line'>    }   
</span><span class='line'>}   </span></code></pre></td></tr></table></div></figure>


<p>这样就解决了extmail的附件大小显示和限制问题。</p>

<p>目前还有一个遗留问题，就是在folder.htm模板界面里显示的邮件大小还是比系统文件大1/3。这个不知道怎么修改了。找到了对应函数，但是它直接显示的多少M或者多少K，用除1.36会出现问题。。。。这个期待高手解决了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/19/extman/">Extman后台登陆问题解决方法</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-19T00:00:00+08:00" pubdate data-updated="true">Jan 19<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>前一阵子给一个公司架设了postfix+mysql+extmail的邮件系统。</p>

<p>用了一段时间后，发现后台管理的extman不能登录了，提示如下</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Can't open /tmp/extman//sid_26da75f9aec35f2cbc6b4fa425ab525e, No such file or directory</span></code></pre></td></tr></table></div></figure>


<p>后来发现是/tmp目录下的extman目录被系统清除了。。</p>

<p>然后再网络上找了一些解决办法，说是Linux系统在启动的时候，会清理/tmp目录。建议将这个目录设置在/var/tmp目录下。</p>

<p>结果用了一段时间后，发现一样是被清理。。。。</p>

<p>我的系统是CentOS 5.3 64bit</p>

<p>最后我通过修改，/var/www/extsuite/extman/webmail.cf文件里面的配置</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#sys_sess_dir, the session dir
</span><span class='line'>SYS_SESS_DIR = /tmp/extman/</span></code></pre></td></tr></table></div></figure>


<p>将SYS_SESS_DIR指定到了/data/extman下面了。估计这次系统不会清除这个目录了吧</p>

<p>还有一种常见错误就是提示</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Can't open /tmp/extman//sid_89b33ec5ce0b5903f24035aa4ad76d15, Permission denied</span></code></pre></td></tr></table></div></figure>


<p>这个是因为extman 那个临时目录的权限不对。</p>

<p>可以设置为777就ok了</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/12/open-telnet-win7/">Win7下启动telnet&#8211;转载</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-12T00:00:00+08:00" pubdate data-updated="true">Jan 12<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>因为我日常需要用到telnet来管理交换机，所以经常用到telnet。</p>

<p>升级到win7后，发现telnet不能用了，提示如下</p>

<p><img src="http://farm9.staticflickr.com/8382/8512218888_459238840f.jpg" alt="telnet报错截图" />
后来查找资料发现</p>

<p>Windows 7出于安全性考虑屏蔽了Telnet。</p>

<p>如何开启呢？</p>

<p>在开始菜单-》控制面板-》程序界面中，点“打开或关闭Windows功能”如下图</p>

<p><img src="http://farm9.staticflickr.com/8378/8512221634_b60d3f0c62.jpg" alt="添加功能" /></p>

<p>然后在弹出的&#8221;Windows功能&#8221;界面中，选择上Telnet客户端，点击确定按钮。如下图</p>

<p><img src="http://farm9.staticflickr.com/8526/8512222420_fd27aa15fe.jpg" alt="打开telnet客户端" /></p>

<p>通过上面这些设置，就打开了Windows默认屏蔽的Telnet功能了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/07/quickmacro-on-win7/">Windows 7平台下按键精灵的后台运行</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-07T00:00:00+08:00" pubdate data-updated="true">Jan 7<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>上次写了一篇野D带黑上，后台挂机按键精灵代码</a>，有人反映win7下按键精灵后台代码不能运行。</p>

<p>这里单独说明下。首先的我win7系统是32为的windows7 旗舰版，按键精灵版本是7.20.5292 免费版。在刚一开按键精灵的时候，会提示Init Seg Error。</p>

<p>这个不用管，直接点确定就可以。然后打开按键精灵后，我们点“设置”按钮</p>

<p><img src="http://farm9.staticflickr.com/8510/8512206738_6e55d4f97b.jpg" alt="设置按钮" /></p>

<p>然后在弹出来的设置界面中，将热键模式选择为增强模式，如下图所示。</p>

<p><img src="http://farm9.staticflickr.com/8515/8511095399_75fe398ca4.jpg" alt="增强模式截图" /></p>

<p>点确定后，返回按键精灵主界面。</p>

<p><strong>创建带黑上脚本</strong>点击新建按钮，进入“按键精灵-我的脚本”界面。然后点击这个界面中的“源文件”标签，如下图所示（注意红色三角标记）</p>

<p><img src="http://farm9.staticflickr.com/8097/8512207532_e622ca5a45_z.jpg" alt="导入截图" /></p>

<p>然后将带黑上脚本的代码粘贴进来。并在右侧“描述”里，写上黑上后台。点击保存退出，如下图所示</p>

<p><img src="http://farm9.staticflickr.com/8095/8511096257_a2cfe36526_z.jpg" alt="保存截图" /></p>

<p>到这里按键精灵设置完毕。只要打开刷黑上的小德号窗口，按F10启动脚本就可以了。然后再切换窗口双开，上网都可以。这个脚本会一直往小德号的窗口发送指令的。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/03/druid-ubrs-quickmacro-code/">野D带黑上，后台挂机按键精灵代码</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-03T00:00:00+08:00" pubdate data-updated="true">Jan 3<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>代码是运行在按键精灵里的。在winxp+按键精灵7和win7+按键精灵7下测试通过</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Plugin hwnd=Window.GetKeyFocusWnd()
</span><span class='line'>Rem start
</span><span class='line'>For 30
</span><span class='line'>Plugin Bkgnd.KeyPress(hwnd,70)
</span><span class='line'>Delay 300
</span><span class='line'>EndFor
</span><span class='line'>Delay 1000
</span><span class='line'>Plugin Bkgnd.KeyDown(hwnd,16)
</span><span class='line'>Plugin Bkgnd.KeyPress(hwnd,87)
</span><span class='line'>Plugin Bkgnd.KeyUp(hwnd,16)
</span><span class='line'>Delay 500
</span><span class='line'>For 30
</span><span class='line'>Plugin Bkgnd.KeyPress(hwnd,70)
</span><span class='line'>Delay 300
</span><span class='line'>EndFor
</span><span class='line'>Delay 1000
</span><span class='line'>Plugin Bkgnd.KeyDown(hwnd,18)
</span><span class='line'>Plugin Bkgnd.KeyPress(hwnd,68)
</span><span class='line'>Plugin Bkgnd.KeyUp(hwnd,18)
</span><span class='line'>Delay 500
</span><span class='line'>For 30
</span><span class='line'>Plugin Bkgnd.KeyPress(hwnd,70)
</span><span class='line'>Delay 300
</span><span class='line'>EndFor
</span><span class='line'>Delay 1000
</span><span class='line'>For 8
</span><span class='line'>Plugin Bkgnd.KeyDown(hwnd,16)
</span><span class='line'>Plugin Bkgnd.KeyPress(hwnd,82)
</span><span class='line'>Plugin Bkgnd.KeyUp(hwnd,16)
</span><span class='line'>EndFor
</span><span class='line'>Delay 500
</span><span class='line'>Goto start
</span></code></pre></td></tr></table></div></figure>


<p>代码说明：</p>

<p>上面是我自己使用的代码，我的快捷键设置和大家不一样，所以别人使用，请注意修改快捷键。</p>

<p>精灵之火（野性） Shift+R</p>

<p>树皮 Shift+W</p>

<p>狂暴回复 Alt+D</p>

<p>横扫+重殴 宏 F （其实就是个AOE宏，需要不断切换目标，保证重殴可以放出来就可以）</p>

<p>以上就是我带刷的代码，基本保证装备不红，人物不死。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/9/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/7/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
<h1>Categories</h1>
<ul id="categories">
  <li class='category'><a href='/blog/categories/css/'>CSS (2)</a></li>
<li class='category'><a href='/blog/categories/cloudstack/'>Cloudstack (1)</a></li>
<li class='category'><a href='/blog/categories/database/'>Database (10)</a></li>
<li class='category'><a href='/blog/categories/game/'>Game (15)</a></li>
<li class='category'><a href='/blog/categories/hardware/'>Hardware (9)</a></li>
<li class='category'><a href='/blog/categories/host/'>Host (3)</a></li>
<li class='category'><a href='/blog/categories/java/'>Java (3)</a></li>
<li class='category'><a href='/blog/categories/life/'>Life (3)</a></li>
<li class='category'><a href='/blog/categories/linux/'>Linux (50)</a></li>
<li class='category'><a href='/blog/categories/mac/'>Mac (5)</a></li>
<li class='category'><a href='/blog/categories/mobile/'>Mobile (8)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>Octopress (2)</a></li>
<li class='category'><a href='/blog/categories/php/'>PHP (14)</a></li>
<li class='category'><a href='/blog/categories/plan/'>Plan (1)</a></li>
<li class='category'><a href='/blog/categories/rails/'>Rails (5)</a></li>
<li class='category'><a href='/blog/categories/ruby/'>Ruby (2)</a></li>
<li class='category'><a href='/blog/categories/software/'>Software (7)</a></li>
<li class='category'><a href='/blog/categories/vim/'>Vim (1)</a></li>
<li class='category'><a href='/blog/categories/virtualization/'>Virtualization (9)</a></li>
<li class='category'><a href='/blog/categories/website/'>Website (4)</a></li>
<li class='category'><a href='/blog/categories/windows/'>Windows (10)</a></li>
<li class='category'><a href='/blog/categories/git/'>git (1)</a></li>
<li class='category'><a href='/blog/categories/rails/'>rails (1)</a></li>
<li class='category'><a href='/blog/categories/vim/'>vim (1)</a></li>

</ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/14/railszhong-wen-wen-ti/">rails中文问题</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/03/kuai-su-pei-zhi-vimhe-macvim/">快速配置vim和macvim</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/28/emlogqian-yi-dao-octopress/">emlog迁移到octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/24/git-first-on-ubuntu/">git-first-on-ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/20/wo-2013nian-xue-xi-lie-biao/">我2013年学习列表</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - babodx -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
