--- 
categories: []
comments: true
layout: post
title: "ubuntu 8.04升级到8.10"
---
<strong>升级</strong>
昨天开始作的升级。<br>
早上到单位，就开始<br>
Alt+F2<br>
在弹出的命令行窗口输入update-manager -d<br>
然后就进入了漫长的等待，单位网络那个垃圾。。。。。告诉我42天。。。。。<br>
一直到下班，下载了900多个文件，一共要下载1300多<br>
晚上到家继续update-manager -d 发现居然可以接着下载，还以为要重新来呢。家里好点，告诉我3个小时<br>
后来就睡觉了。<br>
今天早上起来，发现已经下载完成了，开始到安装更新这一步了，弹出个窗口等我确认。<br>
我点上开始，就洗漱去了。一直到要上班也没有安装完成。（TMD，居然忘记今天星期五，不能开车。还是老婆提醒我，才想起来。）这次我可不敢关机了，怕升级一半，下次进不来系统。直接把本本和上盖子放包里了，下楼打车上班。<br>
在出租车里，完成了全部更新。关机。<br><strong><br>
启动</strong><br>
到了单位，发现系统总卡在进度条进不去。<br>
按Alt+F1然后 Alt+F8查看下文字模式的启动信息，发现一直卡在*Configuring network interfaces...<br>
这个第一次启动，没有办法（希望有好办法的，告诉下。）我就一直死等呀。。。感觉过了20分钟？？？<br>
进入系统了，3D显卡驱动不行。运行uname -a查看，内核还在用8.04的2.6.24-21.<br>
先修改网络吧<br>
sudo gedit /etc/network/interfaces<br>
将里面的<br>
auto eth0<br>
iface eth0 inet dhcp<br>
auto lo<br>
auto wlan0<br>
都注释掉，变成下面样子<br>
#auto lo<br>
iface lo inet loopback<br>
#iface eth0 inet dhcp<br>
address 10.11.10.164<br>
netmask 255.255.255.0<br>
gateway 10.11.10.254<br>
#nameserver 202.106.0.20<br>
#auto eth0<br>
iface wlan0 inet dhcp<br>
wpa-psk 7640768b3d6b31f834b63abc8d2d667ae10f8bc3c41a8e4e87ec2c104d963a1e<br>
wpa-driver wext<br>
wpa-key-mgmt WPA-PSK<br>
wpa-proto WPA<br>
wpa-ssid babohome<br>
#auto wlan0<br>
接着修改/etc/NetworkManager/nm-system-settings.conf文件<br>
sudo gedit /etc/NetworkManager/nm-system-settings.conf<br>
将文件里的[ifupdown] manager=false改成[ifupdown] manager=true<br>
这样基本启动速度的问题就正常
<strong>内核<br></strong>再来说内核<br>
内核需要手动编辑下grub的启动配置文件了。其实2.6.27-7内核已经安装了，就是没有给我们加入的menu.lst文件里面。修改menu.lst<br>
sudo gedit /boot/grub/menu.lst<br>
我的修改如下，这个应该每个人的不太一样。大家可以拷贝以前自己的文件进行修改<br>
title        Ubuntu 8.04.1, kernel 2.6.27-7-generic<br>
root        (hd0,1)<br>
kernel        /boot/vmlinuz-2.6.27-7-generic root=UUID=614a1c10-6ed3-45c9-b24d-f7b3e39725b2 ro quiet splash locale=zh_CN<br>
initrd        /boot/initrd.img-2.6.27-7-generic<br>
quiet<br>
title        Ubuntu 8.04.1, kernel 2.6.27-7-generic (recovery mode)<br>
root        (hd0,1)<br>
kernel        /boot/vmlinuz-2.6.27-7-generic root=UUID=614a1c10-6ed3-45c9-b24d-f7b3e39725b2 ro single<br>
initrd        /boot/initrd.img-2.6.27-7-generic<br>
这个修改后，先不要重新启动。因为我们还没有卸载显卡驱动，要不重启后，卸载驱动还要继续重启。 
<strong>卸载现有的显卡驱动</strong><br>
我原来显卡驱动是用envyng -t来安装的，现在还用这个工具卸载<br>
在终端envyng -t<br>
然后选卸载驱动，安后等卸载完成后，重启就ok了 
<strong>安装显卡驱动<br>
注意，如果内核还是2.6.24-21，新的驱动安装不上。<br></strong>这次我没有用envyng -t来安装，而是用系统->系统管理->硬件驱动来安装的<br>
推荐我的是nvidia 177.80的驱动<br>
等待安装完成后。 Ctrl+Alt+Backspace 重新启动X server<br>
一切ok<br><strong>一些问题</strong><br>
在启动过程中，发现samba deamon启动fail还没有看是什么原因。<div id="related_log" style="font-size:12px">
<b>相关日志：</b><a href="http://xinlogs.com/wow-on-ubuntu-linux">ubuntu8.04 玩魔兽世界 2.4.3(8606)</a><a href="http://xinlogs.com/post/15">试用ubuntu 8.04和LVM动态增加分区</a><a href="http://xinlogs.com/post/9">ubuntu server 9.04 终端乱码问题</a><a href="http://xinlogs.com/post/18">ubuntu 8.10下同步wm6.1手机</a><a href="http://xinlogs.com/post/8">ubuntu 9.04 server 安装VMware Tools解决share folders问题</a>
</div>
